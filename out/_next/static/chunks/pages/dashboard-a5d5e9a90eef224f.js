(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9724],{23230:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var r=t(37876);t(14232);var o=t(48230),s=t.n(o);let l=e=>{let{route:a="",items:t=[],className:o=""}=e,l=(()=>{if(t&&t.length>0)return[{label:"In\xedcio",path:"../dashboard",icon:!0},...t.map(e=>({...e,icon:!1}))];if(!a)return[{label:"In\xedcio",path:"../dashboard",icon:!0}];let e=a.replace(/^\/+|\/+$/g,"").split("/").filter(Boolean),r=[{label:"In\xedcio",path:"../dashboard",icon:!0}],o="";return e.forEach(e=>{o+="/".concat(e);let a=e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase());r.push({label:a,path:o,icon:!1})}),r})();return(0,r.jsx)("nav",{className:"breadcrumb-nav ".concat(o),"aria-label":"breadcrumb",children:(0,r.jsx)("ol",{className:"breadcrumb mb-0",children:l.map((e,a)=>{let t=a===l.length-1;return(0,r.jsx)("li",{className:"breadcrumb-item ".concat(t?"active":""),"aria-current":t?"page":void 0,children:t||!e.path?(0,r.jsxs)("span",{className:"d-flex align-items-center",children:[e.icon&&(0,r.jsx)("i",{className:"fa fa-home me-2","aria-hidden":"true"}),e.label]}):(0,r.jsxs)(s(),{href:e.path,className:"text-decoration-none d-flex align-items-center",children:[e.icon&&(0,r.jsx)("i",{className:"fa fa-home me-2","aria-hidden":"true"}),e.label]})},a)})})})}},37562:(e,a,t)=>{"use strict";t.d(a,{o:()=>o});var r=t(82427);async function o(){try{return(await r.A.get("/properties")).data}catch(e){throw e}}},38507:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(94134)}])},59511:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var r=t(37876),o=t(14232),s=t(89099),l=t(89848);function n(e){let{children:a}=e,[t,n]=(0,o.useState)(!1),[i,c]=(0,o.useState)(!0),d=(0,s.useRouter)();return((0,o.useEffect)(()=>{(()=>{{let e=localStorage.getItem("token")||localStorage.getItem("admin_token"),a=localStorage.getItem("admin_token")?"/admin/login":"/login";if(!e){l.oR.warning("Sua sess\xe3o expirou. Por favor, fa\xe7a login novamente."),d.push(a);return}try{let t=JSON.parse(atob(e.split(".")[1])),r=Math.floor(Date.now()/1e3);if(t.exp&&t.exp<r){localStorage.removeItem("token"),localStorage.removeItem("admin_token"),l.oR.warning("Sua sess\xe3o expirou. Por favor, fa\xe7a login novamente."),d.push(a);return}n(!0)}catch(e){console.error("Erro ao validar token:",e),localStorage.removeItem("token"),localStorage.removeItem("admin_token"),l.oR.error("Token inv\xe1lido. Por favor, fa\xe7a login novamente."),d.push(a)}finally{c(!1)}}})();let e=setInterval(()=>{let e=localStorage.getItem("token")||localStorage.getItem("admin_token"),a=localStorage.getItem("admin_token")?"/admin/login":"/login";if(e)try{let t=JSON.parse(atob(e.split(".")[1])),r=Math.floor(Date.now()/1e3);t.exp&&t.exp<r&&(localStorage.removeItem("token"),localStorage.removeItem("admin_token"),localStorage.removeItem("profileData"),l.oR.warning("Sua sess\xe3o expirou. Por favor, fa\xe7a login novamente."),d.push(a))}catch(e){localStorage.removeItem("token"),localStorage.removeItem("admin_token"),d.push(a)}},3e4);return()=>clearInterval(e)},[d]),(0,o.useEffect)(()=>{let e=e=>{if(("token"===e.key||"admin_token"===e.key)&&!e.newValue){n(!1),l.oR.info("Voc\xea foi desconectado.");let e=!!localStorage.getItem("admin_token");d.push(e?"/admin/login":"/login")}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[d]),i)?(0,r.jsx)("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:(0,r.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,r.jsx)("span",{className:"visually-hidden",children:"Carregando..."})})}):t?a:null}},82427:(e,a,t)=>{"use strict";t.d(a,{A:()=>o});let r=t(91040).A.create({baseURL:"https://backend.ib3capital.app.br/api"});r.interceptors.request.use(e=>{{let a=localStorage.getItem("admin_token"),t=localStorage.getItem("token"),r=a||t;r&&(e.headers.Authorization="Bearer ".concat(r),a?e.baseURL="https://backend.ib3capital.app.br/api/admin":e.baseURL="https://backend.ib3capital.app.br/api/investor")}return e});let o=r},89099:(e,a,t)=>{e.exports=t(84294)},94134:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var r=t(37876),o=t(14232);t(48230);var s=t(82427);async function l(e){try{return(await s.A.get("/wallet/".concat(e))).data}catch(e){throw e}}var n=t(37562),i=t(23230),c=t(59511);function d(){{let e=localStorage.getItem("token")||localStorage.getItem("admin_token");if(e)try{let a=JSON.parse(atob(e.split(".")[1]));return a.id||a.user_id||a.sub||null}catch(e){}}return null}function m(){let[e,a]=(0,o.useState)(null),[t,s]=(0,o.useState)([]),[m,u]=(0,o.useState)(null),[g,h]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async()=>{var e,t,r,o;console.log("Token salvo no localStorage:",localStorage.getItem("token")),console.log("ID do usu\xe1rio logado:",d());let i=d();try{let e=await l(i);a(e)}catch(a){console.error("Erro ao buscar carteira:",a),u((null==a||null==(t=a.response)||null==(e=t.data)?void 0:e.message)||a.message||"Erro ao buscar carteira")}try{let e=await (0,n.o)();s(e)}catch(e){console.error("Erro ao buscar propriedades:",e),u((null==e||null==(o=e.response)||null==(r=o.data)?void 0:r.message)||e.message||"Erro ao buscar propriedades")}h(!1)})()},[]),(0,r.jsx)(c.A,{children:(0,r.jsxs)("div",{className:"p-4 max-w-5xl mx-auto",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6 text-dark",children:"Dashboard"}),g&&(0,r.jsx)("div",{className:"text-gray-500 mb-4 animate-pulse",children:"Carregando informa\xe7\xf5es..."}),m&&(0,r.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:["Erro: ",m]}),e&&(0,r.jsxs)("div",{className:"row mb-4",children:[(0,r.jsx)("div",{className:"col-xl-4 col-md-6 mb-4 mb-xl-0",children:(0,r.jsxs)("div",{className:"widget widget-stats bg-blue",children:[(0,r.jsx)("div",{className:"stats-icon",children:(0,r.jsx)("i",{className:"fa fa-wallet"})}),(0,r.jsxs)("div",{className:"stats-info",children:[(0,r.jsx)("h4",{children:"SALDO DISPON\xcdVEL"}),(0,r.jsxs)("p",{children:["R$ ",Number(e.saldo_disponivel).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsx)("div",{className:"text-gray-500",children:"Dispon\xedvel para uso"})]})]})}),(0,r.jsx)("div",{className:"col-xl-4 col-md-6 mb-4 mb-xl-0",children:(0,r.jsxs)("div",{className:"widget widget-stats bg-info",children:[(0,r.jsx)("div",{className:"stats-icon",children:(0,r.jsx)("i",{className:"fa fa-lock"})}),(0,r.jsxs)("div",{className:"stats-info",children:[(0,r.jsx)("h4",{children:"SALDO BLOQUEADO"}),(0,r.jsxs)("p",{children:["R$ ",Number(e.saldo_bloqueado).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsx)("div",{className:"text-gray-500",children:"Em processamento"})]})]})}),(0,r.jsx)("div",{className:"col-xl-4 col-md-12",children:(0,r.jsxs)("div",{className:"widget widget-stats bg-purple",children:[(0,r.jsx)("div",{className:"stats-icon",children:(0,r.jsx)("i",{className:"fa fa-coins"})}),(0,r.jsxs)("div",{className:"stats-info",children:[(0,r.jsx)("h4",{children:"SALDO TOKENIZADO"}),(0,r.jsx)("p",{children:Array.isArray(e.saldo_tokenizado)&&e.saldo_tokenizado.length>0?e.saldo_tokenizado.map((e,a)=>(0,r.jsxs)("span",{children:["R$ ",Number(e).toLocaleString("pt-BR",{minimumFractionDigits:2}),(0,r.jsx)("br",{})]},a)):"R$ 0,00"}),(0,r.jsx)("div",{className:"text-gray-500",children:"Tokens em carteira"})]})]})})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[1040,636,6593,8792],()=>a(38507)),_N_E=e.O()}]);