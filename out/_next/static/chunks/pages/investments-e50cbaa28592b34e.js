(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[854],{24740:(e,s,a)=>{"use strict";a.d(s,{L:()=>i});var t=a(82427);async function i(e){try{return(await t.A.get("/investments/".concat(e))).data}catch(e){throw e}}},36220:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var t=a(37876),i=a(14232),l=a(18847),r=a.n(l),n=a(24740),d=a(23230),c=a(59511);a(99953);let o=r()(()=>Promise.all([a.e(7144),a.e(1352)]).then(a.bind(a,21352)),{loadableGenerated:{webpack:()=>[21352]},ssr:!1});function m(){let[e,s]=(0,i.useState)([]),[a,l]=(0,i.useState)(null),[r,m]=(0,i.useState)(!0),[h,x]=(0,i.useState)(!1),u=Array.isArray(e)?e.reduce((e,s)=>e+(Number(null==s?void 0:s.valor_unitario)||0)*(Number(null==s?void 0:s.qtd_tokens)||0),0):0,b=Array.isArray(e)?e.reduce((e,s)=>e+(Number(null==s?void 0:s.qtd_tokens)||0),0):0,j=Array.isArray(e)&&e.length>0?u/e.length:0,N=e=>{if(!e)return"-";try{let s=new Date(e);if(isNaN(s.getTime()))return e;return s.toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(s){return e}};(0,i.useEffect)(()=>{(async()=>{let e=function(){{let e=localStorage.getItem("token")||localStorage.getItem("admin_token");if(e)try{let s=JSON.parse(atob(e.split(".")[1]));return s.id||s.user_id||s.sub||null}catch(e){}}return null}();if(!e){l("Fa\xe7a login novamente."),m(!1);return}try{m(!0),l(null);let a=await (0,n.L)(e);a&&Array.isArray(a)?s(a):a&&"object"==typeof a?s([a]):s([])}catch(e){var a,t;console.error("Erro ao buscar investimentos:",e),l((null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.message)||e.message||"Erro ao buscar investimentos"),s([])}finally{m(!1)}})()},[]),(0,i.useEffect)(()=>{let e=()=>{x("dark"===document.documentElement.getAttribute("data-bs-theme"))};e();let s=new MutationObserver(()=>{e()});{s.observe(document.documentElement,{attributes:!0,attributeFilter:["data-bs-theme"]});let a=()=>e();return document.addEventListener("theme-reload",a),()=>{s.disconnect(),document.removeEventListener("theme-reload",a)}}},[]);let v={options:{chart:{id:"invest-chart",toolbar:{show:!1},background:"transparent"},xaxis:{categories:Array.isArray(e)?e.map(e=>N(null==e?void 0:e.data_compra)):[],labels:{rotate:-45,style:{fontSize:"12px",colors:h?"#adb5bd":"#6c757d"}}},yaxis:{labels:{style:{colors:h?"#adb5bd":"#6c757d"}}},colors:["#0d6efd"],dataLabels:{enabled:!1},grid:{borderColor:h?"#495057":"#e9ecef",row:{colors:["transparent"]}},tooltip:{theme:h?"dark":"light",y:{formatter:e=>"R$ ".concat(e.toLocaleString("pt-BR",{minimumFractionDigits:2}))}},theme:{mode:h?"dark":"light"}},series:[{name:"Valor Investido",data:Array.isArray(e)?e.map(e=>(Number(null==e?void 0:e.valor_unitario)||0)*(Number(null==e?void 0:e.qtd_tokens)||0)):[]}]};return(0,t.jsx)(c.A,{children:(0,t.jsxs)("div",{className:"container-fluid py-4",children:[(0,t.jsx)(d.A,{items:[{label:"Investimentos",path:"/investments"}]}),(0,t.jsx)("div",{className:"row mb-4",children:(0,t.jsx)("div",{className:"col-12",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl mb-2 text-dark fw-bold",children:[(0,t.jsx)("i",{className:"fa fa-chart-pie me-3 text-primary"}),"Meus Investimentos"]}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"Acompanhe a evolu\xe7\xe3o dos seus tokens imobili\xe1rios"})]}),(0,t.jsxs)("div",{className:"d-flex gap-2",children:[(0,t.jsxs)("button",{className:"btn btn-outline-primary btn-sm",children:[(0,t.jsx)("i",{className:"fa fa-download me-2"}),"Exportar"]}),(0,t.jsxs)("button",{className:"btn btn-primary btn-sm",children:[(0,t.jsx)("i",{className:"fa fa-plus me-2"}),"Novo Investimento"]})]})]})})}),r&&(0,t.jsxs)("div",{className:"text-center py-5",children:[(0,t.jsx)("div",{className:"spinner-border text-primary mb-3",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Carregando..."})}),(0,t.jsx)("p",{className:"text-muted",children:"Carregando seus investimentos..."})]}),a&&(0,t.jsxs)("div",{className:"alert alert-danger d-flex align-items-center mb-4",role:"alert",children:[(0,t.jsx)("i",{className:"fa fa-exclamation-triangle me-2"}),(0,t.jsx)("div",{children:a})]}),!r&&!a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"row g-4 mb-5",children:[(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsx)("div",{className:"card border-0 shadow-sm h-100 investment-card gradient-purple",children:(0,t.jsx)("div",{className:"card-body text-white p-4",children:(0,t.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h6",{className:"card-subtitle mb-2 text-white-50",children:"Total Investido"}),(0,t.jsxs)("h3",{className:"mb-0 fw-bold money-value",children:["R$ ",u.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,t.jsxs)("small",{className:"text-white-50 mt-1",children:[(0,t.jsx)("i",{className:"fa fa-arrow-up me-1"}),"Patrim\xf4nio Total"]})]}),(0,t.jsx)("div",{className:"investment-stat-icon bg-white bg-opacity-20",children:(0,t.jsx)("i",{className:"fa fa-wallet text-white fs-4"})})]})})})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsx)("div",{className:"card border-0 shadow-sm h-100 investment-card gradient-green",children:(0,t.jsx)("div",{className:"card-body text-white p-4",children:(0,t.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h6",{className:"card-subtitle mb-2 text-white-50",children:"Total de Tokens"}),(0,t.jsx)("h3",{className:"mb-0 fw-bold money-value",children:b}),(0,t.jsxs)("small",{className:"text-white-50 mt-1",children:[(0,t.jsx)("i",{className:"fa fa-coins me-1"}),"Unidades Possu\xeddas"]})]}),(0,t.jsx)("div",{className:"investment-stat-icon bg-white bg-opacity-20",children:(0,t.jsx)("i",{className:"fa fa-coins text-white fs-4"})})]})})})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsx)("div",{className:"card border-0 shadow-sm h-100 investment-card gradient-blue",children:(0,t.jsx)("div",{className:"card-body text-white p-4",children:(0,t.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h6",{className:"card-subtitle mb-2 text-white-50",children:"Ticket M\xe9dio"}),(0,t.jsxs)("h3",{className:"mb-0 fw-bold money-value",children:["R$ ",j.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,t.jsxs)("small",{className:"text-white-50 mt-1",children:[(0,t.jsx)("i",{className:"fa fa-chart-line me-1"}),"Por Investimento"]})]}),(0,t.jsx)("div",{className:"investment-stat-icon bg-white bg-opacity-20",children:(0,t.jsx)("i",{className:"fa fa-calculator text-white fs-4"})})]})})})})]}),(0,t.jsx)("div",{className:"row mb-5",children:(0,t.jsx)("div",{className:"col-12",children:(0,t.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,t.jsxs)("div",{className:"card-header border-bottom-0 d-flex align-items-center justify-content-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h5",{className:"mb-1 fw-bold text-dark",children:[(0,t.jsx)("i",{className:"fa fa-chart-line me-2 text-primary"}),"Evolu\xe7\xe3o dos Investimentos"]}),(0,t.jsx)("small",{className:"text-muted",children:"Hist\xf3rico de compras de tokens por per\xedodo"})]}),(0,t.jsx)("div",{className:"d-flex gap-2",children:(0,t.jsxs)("button",{className:"btn btn-outline-secondary btn-sm",children:[(0,t.jsx)("i",{className:"fa fa-calendar me-1"}),"Per\xedodo"]})})]}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)("div",{className:"chart-container",style:{minHeight:320},children:e.length>0?(0,t.jsx)(o,{options:v.options,series:v.series,type:"bar",height:320},"chart-".concat(h?"dark":"light")):(0,t.jsxs)("div",{className:"empty-state text-center",children:[(0,t.jsx)("i",{className:"fa fa-chart-line fa-3x text-muted"}),(0,t.jsx)("h6",{className:"text-muted",children:"Nenhum dado para exibir"}),(0,t.jsx)("p",{className:"text-muted",children:"Fa\xe7a seu primeiro investimento para ver o gr\xe1fico"})]})})})]})})}),(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-12",children:(0,t.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,t.jsxs)("div",{className:"card-header  border-bottom-0 d-flex align-items-center justify-content-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h5",{className:"mb-1 fw-bold text-dark",children:[(0,t.jsx)("i",{className:"fa fa-list me-2 text-primary"}),"Hist\xf3rico de Compras"]}),(0,t.jsx)("small",{className:"text-muted",children:"Detalhamento de todas as suas aquisi\xe7\xf5es de tokens"})]}),(0,t.jsxs)("div",{className:"d-flex gap-2",children:[(0,t.jsxs)("button",{className:"btn btn-outline-secondary btn-sm",children:[(0,t.jsx)("i",{className:"fa fa-filter me-1"}),"Filtrar"]}),(0,t.jsxs)("button",{className:"btn btn-outline-secondary btn-sm",children:[(0,t.jsx)("i",{className:"fa fa-search me-1"}),"Buscar"]})]})]}),(0,t.jsx)("div",{className:"card-body p-0",children:Array.isArray(e)&&0!==e.length?(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-hover align-middle mb-0 investment-table",children:[(0,t.jsx)("thead",{className:"bg-light",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border-0 fw-semibold text-dark",children:"ID"}),(0,t.jsx)("th",{className:"border-0 fw-semibold text-dark",children:"Propriedade"}),(0,t.jsx)("th",{className:"border-0 fw-semibold text-dark",children:"Tokens"}),(0,t.jsx)("th",{className:"border-0 fw-semibold text-dark",children:"Valor Unit\xe1rio"}),(0,t.jsx)("th",{className:"border-0 fw-semibold text-dark",children:"Total Investido"}),(0,t.jsx)("th",{className:"border-0 fw-semibold text-dark",children:"Status"}),(0,t.jsx)("th",{className:"border-0 fw-semibold text-dark",children:"Origem"}),(0,t.jsx)("th",{className:"border-0 fw-semibold text-dark",children:"Data"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{className:"fw-bold text-primary",children:["#",(null==e?void 0:e.id)||"-"]}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)("div",{className:"property-icon bg-primary bg-opacity-10 me-3",children:(0,t.jsx)("i",{className:"fa fa-building text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"fw-semibold",children:["Propriedade #",(null==e?void 0:e.id_imovel)||"-"]}),(0,t.jsx)("small",{className:"text-muted",children:"Token Imobili\xe1rio"})]})]})}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge bg-light text-dark fs-6",children:(null==e?void 0:e.qtd_tokens)||0})}),(0,t.jsxs)("td",{className:"fw-semibold money-value",children:["R$ ",Number((null==e?void 0:e.valor_unitario)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,t.jsxs)("td",{className:"fw-bold text-success money-value",children:["R$ ",(Number((null==e?void 0:e.valor_unitario)||0)*Number((null==e?void 0:e.qtd_tokens)||0)).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,t.jsx)("td",{children:(0,t.jsxs)("span",{className:"badge ".concat("ativo"===((null==e?void 0:e.status)||"").toLowerCase()?"status-active":"status-inactive"),children:[(0,t.jsx)("i",{className:"fa ".concat("ativo"===((null==e?void 0:e.status)||"").toLowerCase()?"fa-check-circle":"fa-pause-circle"," me-1")}),(null==e?void 0:e.status)||"N/A"]})}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"badge bg-info",children:(null==e?void 0:e.origem)||"Plataforma"})}),(0,t.jsx)("td",{className:"text-muted",children:N(null==e?void 0:e.data_compra)})]},(null==e?void 0:e.id)||Math.random()))})]})}):(0,t.jsxs)("div",{className:"empty-state text-center",children:[(0,t.jsx)("i",{className:"fa fa-inbox fa-3x text-muted"}),(0,t.jsx)("h6",{className:"text-muted",children:"Nenhum investimento encontrado"}),(0,t.jsx)("p",{className:"text-muted",children:"Comece a investir em tokens imobili\xe1rios agora"}),(0,t.jsxs)("button",{className:"btn btn-primary",children:[(0,t.jsx)("i",{className:"fa fa-plus me-2"}),"Fazer Primeiro Investimento"]})]})})]})})})]})]})})}},44903:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/investments",function(){return a(36220)}])},99953:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[1040,2602,636,6593,8792],()=>s(44903)),_N_E=e.O()}]);