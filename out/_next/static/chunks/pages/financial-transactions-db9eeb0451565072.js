(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4257],{4928:(e,a,t)=>{"use strict";t.d(a,{D:()=>n});var s=t(82427);async function n(){try{return(await s.A.get("/transacoes-financeiras")).data}catch(e){throw e}}},18473:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var s=t(37876),n=t(14232),r=t(4928),i=t(23230),l=t(59511);function c(e){return new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function o(){var e;let[a,t]=(0,n.useState)([]),[o,d]=(0,n.useState)(null),[m,h]=(0,n.useState)(!0);(0,n.useEffect)(()=>{!async function(){if(!function(){{let e=localStorage.getItem("token")||localStorage.getItem("admin_token");if(e)try{let a=JSON.parse(atob(e.split(".")[1]));return a.id||a.user_id||a.sub||null}catch(e){}}return null}()){d("ID do usu\xe1rio n\xe3o encontrado no token. Fa\xe7a login novamente."),h(!1);return}try{h(!0);let e=await (0,r.D)();t(Array.isArray(e)?e:[])}catch(t){var e,a;d((null==t||null==(a=t.response)||null==(e=a.data)?void 0:e.message)||t.message||"Erro ao buscar transa\xe7\xf5es financeiras")}finally{h(!1)}}()},[]);let u=a.reduce((e,a)=>{let t=function(e){let a=new Date(e),t=new Date,s=new Date;return(s.setDate(t.getDate()-1),t.setHours(0,0,0,0),s.setHours(0,0,0,0),a.setHours(0,0,0,0),a.getTime()===t.getTime())?"Hoje":a.getTime()===s.getTime()?"Ontem":a.toLocaleDateString("pt-BR")}(a.data_transacao);return e[t]||(e[t]=[]),e[t].push(a),e},{}),x=Object.keys(u).sort((e,a)=>{if("Hoje"===e)return -1;if("Hoje"===a)return 1;if("Ontem"===e)return -1;if("Ontem"===a)return 1;let[t,s,n]=e.split("/").map(Number),[r,i,l]=a.split("/").map(Number);return new Date(l,i-1,r)-new Date(n,s-1,t)});function g(e){return["dep\xf3sito","venda","recebimento","transfer\xeancia recebida","rendimento","resgate","cr\xe9dito","venda_token"].includes(null==e?void 0:e.toLowerCase())}let f=a.reduce((e,a)=>{let t=Number(a.valor);return g(a.tipo)?e+t:e-t},0);return(0,s.jsx)(l.A,{children:(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsx)(i.A,{items:[{label:"Extrato Financeiro",path:"/financial-transactions"}]}),(0,s.jsx)("div",{className:"d-flex align-items-center justify-content-between mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"h2 fw-bold text-dark mb-1",children:[(0,s.jsx)("i",{className:"fa fa-chart-line me-2 text-primary"}),"Extrato Financeiro"]}),(0,s.jsx)("p",{className:"text-muted mb-0",children:"Acompanhe todas as suas movimenta\xe7\xf5es financeiras"})]})}),a.length>0&&!m&&(0,s.jsxs)("div",{className:"row g-3 mb-4",children:[(0,s.jsx)("div",{className:"col-md-4",children:(0,s.jsx)("div",{className:"card border-0 shadow-sm h-100",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(0,s.jsx)("div",{className:"card-body text-white",style:{minHeight:"100px"},children:(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h6",{className:"card-subtitle mb-2 text-white-50",children:"Total de Transa\xe7\xf5es"}),(0,s.jsx)("h3",{className:"mb-0 fw-bold",children:a.length})]}),(0,s.jsx)("div",{className:"bg-white bg-opacity-20 rounded-circle p-3",children:(0,s.jsx)("i",{className:"fa fa-list text-white fs-4"})})]})})})}),(0,s.jsx)("div",{className:"col-md-4",children:(0,s.jsx)("div",{className:"card border-0 shadow-sm h-100",style:{background:f>=0?"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)":"linear-gradient(135deg, #fc4a1a 0%, #f7b733 100%)"},children:(0,s.jsx)("div",{className:"card-body text-white",children:(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h6",{className:"card-subtitle mb-2 text-white-50",children:"Saldo Total"}),(0,s.jsxs)("h3",{className:"mb-0 fw-bold",children:["R$ ",Math.abs(f).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,s.jsx)("div",{className:"bg-white bg-opacity-20 rounded-circle p-3",children:(0,s.jsx)("i",{className:"fa ".concat(f>=0?"fa-arrow-up":"fa-arrow-down"," text-white fs-4")})})]})})})}),(0,s.jsx)("div",{className:"col-md-4",children:(0,s.jsx)("div",{className:"card border-0 shadow-sm h-100",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:(0,s.jsx)("div",{className:"card-body text-white",children:(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h6",{className:"card-subtitle mb-2 text-white-50",children:"\xdaltima Transa\xe7\xe3o"}),(0,s.jsx)("p",{className:"mb-0 fw-semibold",children:a.length>0?c(null==(e=a[0])?void 0:e.data_transacao):"-"})]}),(0,s.jsx)("div",{className:"bg-white bg-opacity-20 rounded-circle p-3",children:(0,s.jsx)("i",{className:"fa fa-clock text-white fs-4"})})]})})})})]}),m&&(0,s.jsxs)("div",{className:"text-center py-5",children:[(0,s.jsx)("div",{className:"spinner-border text-primary mb-3",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Carregando..."})}),(0,s.jsx)("p",{className:"text-muted",children:"Carregando transa\xe7\xf5es..."})]}),o&&(0,s.jsx)("div",{className:"alert alert-danger border-0 shadow-sm",role:"alert",children:(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("i",{className:"fa fa-exclamation-triangle me-2"}),o]})}),0===a.length&&!m&&(0,s.jsxs)("div",{className:"text-center py-5",children:[(0,s.jsx)("i",{className:"fa fa-inbox text-muted mb-3",style:{fontSize:"4rem"}}),(0,s.jsx)("h4",{className:"text-muted",children:"Nenhuma transa\xe7\xe3o encontrada"}),(0,s.jsx)("p",{className:"text-muted",children:"Quando voc\xea realizar transa\xe7\xf5es, elas aparecer\xe3o aqui."})]}),(0,s.jsx)("div",{className:"",children:x.map(e=>(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,s.jsxs)("div",{className:"bg-primary text-white rounded-pill px-3 py-1 fw-semibold small",children:[(0,s.jsx)("i",{className:"fa fa-calendar me-2"}),e]}),(0,s.jsx)("div",{className:"flex-grow-1 ms-3",style:{height:"1px",backgroundColor:"#e9ecef"}})]}),(0,s.jsx)("div",{className:"row g-3",children:u[e].map(e=>{var a;return(0,s.jsx)("div",{className:"col-12",children:(0,s.jsxs)("div",{className:"card border-0 shadow-sm h-100 position-relative overflow-hidden",children:[(0,s.jsx)("div",{className:"position-absolute top-0 start-0 h-100 ".concat(g(e.tipo)?"bg-success":"bg-danger"),style:{width:"4px"}}),(0,s.jsx)("div",{className:"card-body p-4",style:{minHeight:"120px"},children:(0,s.jsxs)("div",{className:"d-flex align-items-center h-100",children:[(0,s.jsx)("div",{className:"me-4 d-flex align-items-center justify-content-center rounded-circle ".concat(g(e.tipo)?"bg-success bg-opacity-10 text-success":"bg-danger bg-opacity-10 text-danger"),style:{width:64,height:64,fontSize:26},children:(0,s.jsx)("i",{className:"fa ".concat(g(e.tipo)?"fa-arrow-down":"fa-arrow-up")})}),(0,s.jsxs)("div",{className:"flex-grow-1",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,s.jsx)("h5",{className:"mb-0 fw-bold text-dark me-3",style:{fontSize:"1.1rem"},children:{compra_token:"Compra de Token",venda_token:"Venda de Token",deposito:"Dep\xf3sito",saque:"Saque",transferencia:"Transfer\xeancia",rendimento:"Rendimento"}[a=e.tipo]||(null==a?void 0:a.charAt(0).toUpperCase())+(null==a?void 0:a.slice(1))}),(0,s.jsxs)("span",{className:"badge ".concat("concluido"===e.status?"bg-success":"pendente"===e.status?"bg-warning":"bg-secondary"," text-white"),children:[(0,s.jsx)("i",{className:"fa ".concat("concluido"===e.status?"fa-check":"pendente"===e.status?"fa-clock":"fa-times"," me-1")}),e.status]})]}),(0,s.jsxs)("div",{className:"d-flex align-items-center text-muted mb-2",children:[(0,s.jsx)("i",{className:"fa fa-tag me-2"}),(0,s.jsx)("span",{className:"me-4",children:e.referencia}),(0,s.jsx)("i",{className:"fa fa-clock me-2"}),(0,s.jsx)("span",{children:c(e.data_transacao)})]})]}),(0,s.jsxs)("div",{className:"text-end",children:[(0,s.jsxs)("div",{className:"fw-bold ".concat(g(e.tipo)?"text-success":"text-danger"),style:{fontSize:"1.35rem"},children:[g(e.tipo)?"+":"-"," R$ ",Number(e.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("small",{className:"text-muted",style:{fontSize:"0.9rem"},children:g(e.tipo)?"Entrada":"Sa\xedda"})]})]})})]})},e.id)})})]},e))})]})})}},23230:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var s=t(37876);t(14232);var n=t(48230),r=t.n(n);let i=e=>{let{route:a="",items:t=[],className:n=""}=e,i=(()=>{if(t&&t.length>0)return[{label:"In\xedcio",path:"../dashboard",icon:!0},...t.map(e=>({...e,icon:!1}))];if(!a)return[{label:"In\xedcio",path:"../dashboard",icon:!0}];let e=a.replace(/^\/+|\/+$/g,"").split("/").filter(Boolean),s=[{label:"In\xedcio",path:"../dashboard",icon:!0}],n="";return e.forEach(e=>{n+="/".concat(e);let a=e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase());s.push({label:a,path:n,icon:!1})}),s})();return(0,s.jsx)("nav",{className:"breadcrumb-nav ".concat(n),"aria-label":"breadcrumb",children:(0,s.jsx)("ol",{className:"breadcrumb mb-0",children:i.map((e,a)=>{let t=a===i.length-1;return(0,s.jsx)("li",{className:"breadcrumb-item ".concat(t?"active":""),"aria-current":t?"page":void 0,children:t||!e.path?(0,s.jsxs)("span",{className:"d-flex align-items-center",children:[e.icon&&(0,s.jsx)("i",{className:"fa fa-home me-2","aria-hidden":"true"}),e.label]}):(0,s.jsxs)(r(),{href:e.path,className:"text-decoration-none d-flex align-items-center",children:[e.icon&&(0,s.jsx)("i",{className:"fa fa-home me-2","aria-hidden":"true"}),e.label]})},a)})})})}},49907:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/financial-transactions",function(){return t(18473)}])},59511:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var s=t(37876),n=t(14232),r=t(89099),i=t(89848);function l(e){let{children:a}=e,[t,l]=(0,n.useState)(!1),[c,o]=(0,n.useState)(!0),d=(0,r.useRouter)();return((0,n.useEffect)(()=>{(()=>{{let e=localStorage.getItem("token")||localStorage.getItem("admin_token"),a=localStorage.getItem("admin_token")?"/admin/login":"/login";if(!e){i.oR.warning("Sua sess\xe3o expirou. Por favor, fa\xe7a login novamente."),d.push(a);return}try{let t=JSON.parse(atob(e.split(".")[1])),s=Math.floor(Date.now()/1e3);if(t.exp&&t.exp<s){localStorage.removeItem("token"),localStorage.removeItem("admin_token"),i.oR.warning("Sua sess\xe3o expirou. Por favor, fa\xe7a login novamente."),d.push(a);return}l(!0)}catch(e){console.error("Erro ao validar token:",e),localStorage.removeItem("token"),localStorage.removeItem("admin_token"),i.oR.error("Token inv\xe1lido. Por favor, fa\xe7a login novamente."),d.push(a)}finally{o(!1)}}})();let e=setInterval(()=>{let e=localStorage.getItem("token")||localStorage.getItem("admin_token"),a=localStorage.getItem("admin_token")?"/admin/login":"/login";if(e)try{let t=JSON.parse(atob(e.split(".")[1])),s=Math.floor(Date.now()/1e3);t.exp&&t.exp<s&&(localStorage.removeItem("token"),localStorage.removeItem("admin_token"),localStorage.removeItem("profileData"),i.oR.warning("Sua sess\xe3o expirou. Por favor, fa\xe7a login novamente."),d.push(a))}catch(e){localStorage.removeItem("token"),localStorage.removeItem("admin_token"),d.push(a)}},3e4);return()=>clearInterval(e)},[d]),(0,n.useEffect)(()=>{let e=e=>{if(("token"===e.key||"admin_token"===e.key)&&!e.newValue){l(!1),i.oR.info("Voc\xea foi desconectado.");let e=!!localStorage.getItem("admin_token");d.push(e?"/admin/login":"/login")}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[d]),c)?(0,s.jsx)("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Carregando..."})})}):t?a:null}},82427:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});let s=t(91040).A.create({baseURL:"https://backend.ib3capital.app.br/api"});s.interceptors.request.use(e=>{{let a=localStorage.getItem("admin_token"),t=localStorage.getItem("token"),s=a||t;s&&(e.headers.Authorization="Bearer ".concat(s),a?e.baseURL="https://backend.ib3capital.app.br/api/admin":e.baseURL="https://backend.ib3capital.app.br/api/investor")}return e});let n=s},89099:(e,a,t)=>{e.exports=t(84294)}},e=>{var a=a=>e(e.s=a);e.O(0,[1040,636,6593,8792],()=>a(49907)),_N_E=e.O()}]);