(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3439],{23230:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var r=t(37876);t(14232);var o=t(48230),s=t.n(o);let n=e=>{let{route:a="",items:t=[],className:o=""}=e,n=(()=>{if(t&&t.length>0)return[{label:"In\xedcio",path:"../dashboard",icon:!0},...t.map(e=>({...e,icon:!1}))];if(!a)return[{label:"In\xedcio",path:"../dashboard",icon:!0}];let e=a.replace(/^\/+|\/+$/g,"").split("/").filter(Boolean),r=[{label:"In\xedcio",path:"../dashboard",icon:!0}],o="";return e.forEach(e=>{o+="/".concat(e);let a=e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase());r.push({label:a,path:o,icon:!1})}),r})();return(0,r.jsx)("nav",{className:"breadcrumb-nav ".concat(o),"aria-label":"breadcrumb",children:(0,r.jsx)("ol",{className:"breadcrumb mb-0",children:n.map((e,a)=>{let t=a===n.length-1;return(0,r.jsx)("li",{className:"breadcrumb-item ".concat(t?"active":""),"aria-current":t?"page":void 0,children:t||!e.path?(0,r.jsxs)("span",{className:"d-flex align-items-center",children:[e.icon&&(0,r.jsx)("i",{className:"fa fa-home me-2","aria-hidden":"true"}),e.label]}):(0,r.jsxs)(s(),{href:e.path,className:"text-decoration-none d-flex align-items-center",children:[e.icon&&(0,r.jsx)("i",{className:"fa fa-home me-2","aria-hidden":"true"}),e.label]})},a)})})})}},59511:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var r=t(37876),o=t(14232),s=t(89099),n=t(89848);function l(e){let{children:a}=e,[t,l]=(0,o.useState)(!1),[i,c]=(0,o.useState)(!0),d=(0,s.useRouter)();return((0,o.useEffect)(()=>{(()=>{{let e=localStorage.getItem("token")||localStorage.getItem("admin_token"),a=localStorage.getItem("admin_token")?"/admin/login":"/login";if(!e){n.oR.warning("Sua sess\xe3o expirou. Por favor, fa\xe7a login novamente."),d.push(a);return}try{let t=JSON.parse(atob(e.split(".")[1])),r=Math.floor(Date.now()/1e3);if(t.exp&&t.exp<r){localStorage.removeItem("token"),localStorage.removeItem("admin_token"),n.oR.warning("Sua sess\xe3o expirou. Por favor, fa\xe7a login novamente."),d.push(a);return}l(!0)}catch(e){console.error("Erro ao validar token:",e),localStorage.removeItem("token"),localStorage.removeItem("admin_token"),n.oR.error("Token inv\xe1lido. Por favor, fa\xe7a login novamente."),d.push(a)}finally{c(!1)}}})();let e=setInterval(()=>{let e=localStorage.getItem("token")||localStorage.getItem("admin_token"),a=localStorage.getItem("admin_token")?"/admin/login":"/login";if(e)try{let t=JSON.parse(atob(e.split(".")[1])),r=Math.floor(Date.now()/1e3);t.exp&&t.exp<r&&(localStorage.removeItem("token"),localStorage.removeItem("admin_token"),localStorage.removeItem("profileData"),n.oR.warning("Sua sess\xe3o expirou. Por favor, fa\xe7a login novamente."),d.push(a))}catch(e){localStorage.removeItem("token"),localStorage.removeItem("admin_token"),d.push(a)}},3e4);return()=>clearInterval(e)},[d]),(0,o.useEffect)(()=>{let e=e=>{if(("token"===e.key||"admin_token"===e.key)&&!e.newValue){l(!1),n.oR.info("Voc\xea foi desconectado.");let e=!!localStorage.getItem("admin_token");d.push(e?"/admin/login":"/login")}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[d]),i)?(0,r.jsx)("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:(0,r.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,r.jsx)("span",{className:"visually-hidden",children:"Carregando..."})})}):t?a:null}},70293:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var r=t(37876),o=t(14232),s=t(48230),n=t.n(s),l=t(79454),i=t(23230),c=t(59511);function d(){let[e,a]=(0,o.useState)([]),[t,s]=(0,o.useState)(!0),[d,m]=(0,o.useState)(null);return((0,o.useEffect)(()=>{(async()=>{try{let e=await (0,l._)();a(e)}catch(e){console.error("Erro ao buscar investidores:",e,null==e?void 0:e.response),m("Erro ao carregar investidores.")}finally{s(!1)}})()},[]),t)?(0,r.jsx)("div",{className:"text-gray-500 animate-pulse",children:"Carregando investidores..."}):d?(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d}):(0,r.jsx)(c.A,{children:(0,r.jsxs)("div",{className:"p-4 max-w-6xl",children:[(0,r.jsx)(i.A,{items:[{label:"Investidores",path:"/admin/investors"}],className:"mb-4"}),(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8 text-dark",children:"Investidores"}),(0,r.jsxs)("div",{className:"row g-4",children:[0===e.length&&(0,r.jsx)("div",{className:"col-12 text-gray-500",children:"Nenhum investidor cadastrado."}),e.map(e=>(0,r.jsx)("div",{className:"col-lg-4 col-md-6",children:(0,r.jsxs)("div",{className:"card h-100 shadow border-0 d-flex flex-column",children:[(0,r.jsxs)("div",{className:"d-flex align-items-center p-3 border-bottom",children:[(0,r.jsx)("img",{src:e.foto_url||"/assets/img/user/user-default.jpg",alt:e.nome,className:"rounded-circle me-3",style:{width:56,height:56,objectFit:"cover",border:"2px solid #eee"},onError:e=>{e.target.src="/assets/img/user/user-default.jpg"}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"fw-bold text-lg text-theme",children:e.nome}),(0,r.jsxs)("div",{className:"text-gray-500 text-sm",children:["ID: ",e.id]})]})]}),(0,r.jsxs)("div",{className:"card-body flex-grow-1 d-flex flex-column gap-2",children:[(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,r.jsx)("i",{className:"fa fa-envelope text-blue-600 me-2"}),(0,r.jsx)("span",{children:e.email})]}),(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,r.jsx)("i",{className:"fa fa-phone text-green-600 me-2"}),(0,r.jsx)("span",{children:e.telefone||"N\xe3o informado"})]}),(0,r.jsx)(n(),{href:"/admin/investors/".concat(e.id),className:"btn btn-outline-primary mt-auto w-100",children:"Ver Mais"})]})]})},e.id))]})]})})}},79454:(e,a,t)=>{"use strict";t.d(a,{_:()=>o});var r=t(82427);async function o(){try{return(await r.A.get("/investors")).data}catch(e){throw e}}},82427:(e,a,t)=>{"use strict";t.d(a,{A:()=>o});let r=t(91040).A.create({baseURL:"https://backend.ib3capital.app.br/api"});r.interceptors.request.use(e=>{{let a=localStorage.getItem("admin_token"),t=localStorage.getItem("token"),r=a||t;r&&(e.headers.Authorization="Bearer ".concat(r),a?e.baseURL="https://backend.ib3capital.app.br/api/admin":e.baseURL="https://backend.ib3capital.app.br/api/investor")}return e});let o=r},89099:(e,a,t)=>{e.exports=t(84294)},95931:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/investors",function(){return t(70293)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[1040,636,6593,8792],()=>a(95931)),_N_E=e.O()}]);