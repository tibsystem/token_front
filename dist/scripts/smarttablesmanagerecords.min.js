import{SmartTables}from"./smartTables.bundle.js";const sampleData=[{id:146134,name:"John Doe",email:"john@example.com",phone:"(555) 123-4567",salary:75e3,department:"Engineering",position:"Senior Developer",joinDate:"2020-03-15",active:!0,status:"Full-time"},{id:146137,name:"Jane Smith",email:"jane@example.com",phone:"(555) 987-6543",salary:82e3,department:"Marketing",position:"Marketing Manager",joinDate:"2019-07-22",active:!0,status:"Full-time"},{id:146142,name:"Bob Johnson",email:"bob@example.com",phone:"(555) 234-5678",salary:65e3,department:"Customer Support",position:"Support Specialist",joinDate:"2021-01-10",active:!1,status:"Part-time"},{id:146145,name:"Sarah Williams",email:"sarah@example.com",phone:"(555) 345-6789",salary:9e4,department:"Human Resources",position:"HR Director",joinDate:"2018-11-05",active:!0,status:"Full-time"},{id:146147,name:"Mike Davis",email:"mike@example.com",phone:"(555) 456-7890",salary:67500,department:"Engineering",position:"Junior Developer",joinDate:"2022-02-28",active:!0,status:"Contract"},{id:146152,name:"Emily Wilson",email:"emily@example.com",phone:"(555) 567-8901",salary:72e3,department:"Finance",position:"Financial Analyst",joinDate:"2020-09-14",active:!0,status:"Full-time"},{id:146156,name:"David Brown",email:"david@example.com",phone:"(555) 678-9012",salary:85e3,department:"Engineering",position:"DevOps Engineer",joinDate:"2019-05-18",active:!0,status:"Full-time"},{id:146161,name:"Lisa Taylor",email:"lisa@example.com",phone:"(555) 789-0123",salary:58e3,department:"Sales",position:"Sales Representative",joinDate:"2021-11-30",active:!1,status:"Part-time"},{id:146165,name:"James Miller",email:"james@example.com",phone:"(555) 890-1234",salary:95e3,department:"Executive",position:"CTO",joinDate:"2017-08-12",active:!0,status:"Full-time"},{id:146169,name:"Amanda Clark",email:"amanda@example.com",phone:"(555) 901-2345",salary:78e3,department:"Marketing",position:"Content Strategist",joinDate:"2020-06-25",active:!0,status:"Full-time"},{id:146172,name:"Robert White",email:"robert@example.com",phone:"(555) 012-3456",salary:62e3,department:"Customer Support",position:"Technical Support",joinDate:"2022-04-05",active:!0,status:"Contract"},{id:146175,name:"Jennifer Lee",email:"jennifer@example.com",phone:"(555) 123-7890",salary:88e3,department:"Product",position:"Product Manager",joinDate:"2019-02-17",active:!0,status:"Full-time"},{id:146178,name:"Thomas Harris",email:"thomas@example.com",phone:"(555) 234-8901",salary:71e3,department:"Engineering",position:"QA Engineer",joinDate:"2021-07-08",active:!0,status:"Full-time"},{id:146181,name:"Patricia Martin",email:"patricia@example.com",phone:"(555) 345-9012",salary:83e3,department:"Human Resources",position:"Recruitment Manager",joinDate:"2018-04-22",active:!1,status:"Contract"},{id:146184,name:"Daniel Anderson",email:"daniel@example.com",phone:"(555) 456-0123",salary:69e3,department:"Finance",position:"Accountant",joinDate:"2020-12-03",active:!0,status:"Full-time"},{id:146187,name:"Michelle Walker",email:"michelle@example.com",phone:"(555) 567-1234",salary:77e3,department:"Sales",position:"Sales Manager",joinDate:"2019-10-19",active:!0,status:"Full-time"},{id:146190,name:"Christopher Young",email:"chris@example.com",phone:"(555) 678-2345",salary:92e3,department:"Engineering",position:"Data Scientist",joinDate:"2018-07-11",active:!0,status:"Full-time"},{id:146193,name:"Nancy Hall",email:"nancy@example.com",phone:"(555) 789-3456",salary:64e3,department:"Marketing",position:"Social Media Specialist",joinDate:"2021-05-27",active:!0,status:"Part-time"},{id:146196,name:"Kevin Allen",email:"kevin@example.com",phone:"(555) 890-4567",salary:87e3,department:"Product",position:"UX Designer",joinDate:"2020-01-14",active:!0,status:"Full-time"},{id:146199,name:"Laura King",email:"laura@example.com",phone:"(555) 901-5678",salary:73e3,department:"Customer Support",position:"Customer Success Manager",joinDate:"2019-09-08",active:!1,status:"Contract"}];sampleData.forEach(e=>{e.id=String(e.id)}),document.addEventListener("DOMContentLoaded",()=>{const o={editing:null,saved:new Set,adding:!1},i=new SmartTables("clientTable",{data:{type:"json",source:sampleData,idField:"id",columns:[{data:"id",title:"ID",editable:!1},{data:"name",title:"Name",required:!0},{data:"email",title:"Email",type:"email",required:!0},{data:"phone",title:"Phone",type:"tel",format:"phone",placeholder:"(555) 555-5555",required:!0},{data:"salary",title:"Salary",type:"number",min:0,step:500,render:e=>"$"+e.toLocaleString()},{data:"department",title:"Department",type:"select",options:["Engineering","Sales","Executive","Marketing","Human Resources","Customer Support","Finance","Operations","Product","Research","Legal","IT"]},{data:"joinDate",title:"Join Date",type:"date",render:e=>new Date(e).toLocaleDateString()},{data:"active",title:"Active",type:"boolean",render:e=>!0===e?'<span class="badge bg-success">Yes</span>':'<span class="badge bg-danger">No</span>'},{data:"status",title:"Status",type:"select",options:[{value:"Full-time",label:"Full-time"},{value:"Part-time",label:"Part-time"},{value:"Contract",label:"Contract"},{value:"Intern",label:"Intern"}]},{data:"actions",title:"Actions",sortable:!1,editable:!1,render:(e,t)=>`
                        <button type="button" class="btn btn-primary btn-xs edit-btn" data-id="${t.id}">Edit</button>
                        <button type="button" class="btn btn-danger btn-xs delete-btn" data-id="${t.id}">Del</button>
                    `}]},debug:!0,responsive:!0,addRecord:!0,hooks:{beforeEdit(e){o.editing=e;e=this.table.querySelector(`tbody tr[data-id="${e}"]`);return e&&e.classList.add("editing"),!0},afterEdit(...e){let t,a,i;1===e.length&&"object"==typeof e[0]?{rowId:t,rowData:a,success:i}=e[0]:[t,a,i]=e,!(o.editing=null)===i&&(o.saved.add(t),setTimeout(()=>{o.saved.delete(t);var e=this.table.querySelector(`tbody tr[data-id="${t}"]`);e&&e.classList.remove("saved")},3e3)),this.draw(),this.searchQuery&&""!==this.searchQuery.trim()&&this.handleSearch(this.searchQuery),void 0!==this.currentSortColumn&&this.currentSortDirection&&this.sortBy(this.currentSortColumn,this.currentSortDirection),o.editing&&(e=this.table.querySelector(`tbody tr[data-id="${o.editing}"]`))&&e.classList.add("editing"),o.saved.forEach(e=>{e=this.table.querySelector(`tbody tr[data-id="${e}"]`);e&&e.classList.add("saved")})},onEditModalCreated(e,t,a){return e},onEditModalBeforeShow(e,t,a){console.log("Edit modal is about to be shown for row:",t),e.classList.add("custom-edit-modal");t=e.querySelector("form");t&&t.addEventListener("keydown",e=>{"Enter"===e.key&&e.preventDefault()})},onEditDataCollected(e,t,a){console.log("Data collected from edit form:",e);var i={...e};const o={};this.options.data.columns.forEach(e=>{e.data&&e.type&&(o[e.data]=e.type)});for(const s in o){var n=o[s],r=i[s];switch(n){case"number":i[s]=void 0!==r&&""!==r?parseFloat(r):0;break;case"boolean":i[s]=s in i&&"on"===r;break;case"date":i[s]=r?new Date(r).toISOString().split("T")[0]:""}}i.lastModified=(new Date).toISOString();e=sampleData.findIndex(e=>e.id===t);return-1!==e&&(sampleData[e]={...sampleData[e],...i}),i},onEditSuccess(e,t,a){console.log("Record updated successfully:",e);const i=document.createElement("div");i.className="floating-notification success",i.textContent=`Record ${e} updated successfully`,document.body.appendChild(i),setTimeout(()=>{i.classList.add("show"),setTimeout(()=>{i.classList.remove("show"),setTimeout(()=>i.remove(),300)},2e3)},10)},onEditError(e,t,a){console.error("Error updating record:",e,t)},beforeDelete(e){e=this.table.querySelector(`tbody tr[data-id="${e}"]`);return e&&e.classList.add("deleting"),!0},afterDelete(e,t,a){a?(console.log("Record deleted successfully:",e),this.draw(),void 0!==this.currentSortColumn&&this.currentSortDirection&&this.sortBy(this.currentSortColumn,this.currentSortDirection)):(a=this.table.querySelector(`tbody tr[data-id="${e}"]`))&&a.classList.remove("deleting")},onDeleteModalCreated(e,t){return e},onDeleteSuccess(e,t){console.log("Record deleted:",e)},beforeAddRecord(e,t){return o.adding=!0,console.log("Adding new record with initial data:",e),e},afterAddRecord(t,e){o.adding=!1,e?(console.log("Successfully added new record:",t),sampleData.some(e=>e.id===t.id)||sampleData.push(t)):console.warn("Failed to add new record")},onAddModalCreated(e,t,a){var e=(new DOMParser).parseFromString(e,"text/html").body.firstChild,i=(e.classList.add("smarttables-add-modal"),e.querySelector('[id$="-submit"]'));return i&&(i.classList.add("btn-success"),i.innerHTML='<i class="fas fa-plus-circle me-1"></i> '+i.textContent),e.outerHTML},onAddModalBeforeShow(t,e,a){t.classList.add("fade"),t.addEventListener("shown.bs.modal",()=>{var e=t.querySelector('form input:not([type="hidden"]):not([readonly]):not([disabled])');e&&e.focus()})},onAddDataCollected(e,t){var a;return e.salary&&(e.salary=Number(e.salary)),"on"===e.active||"true"===e.active?e.active=!0:"off"!==e.active&&"false"!==e.active&&void 0!==e.active||(e.active=!1),e.id||(a=Math.max(...sampleData.map(e=>parseInt(e.id))),e.id=String(a+1)),e},onAddRecordSuccess(t){console.log("Record added successfully:",t),this.draw(),this.searchQuery&&""!==this.searchQuery.trim()&&setTimeout(()=>this.handleSearch(this.searchQuery),50),void 0!==this.currentSortColumn&&this.currentSortDirection&&setTimeout(()=>this.sortBy(this.currentSortColumn,this.currentSortDirection),100),setTimeout(()=>{const e=i.table.querySelector(`tbody tr[data-id="${t.id}"]`);e&&(e.classList.add("new-record"),setTimeout(()=>{e.classList.remove("new-record")},3e3))},200)},onAddRecordError(e,t){console.error("Error adding record:",e),console.error("Attempted data:",t)},onAddCancelled(e){console.log("Add operation cancelled"),o.adding=!1},afterInit(){var t=this.toolbarElement;if(t){var a=document.createElement("button");a.className="btn btn-success add-record-btn ms-2",a.innerHTML='<i class="fas fa-plus-circle me-1"></i> Add Record',a.setAttribute("type","button");let e=t.querySelector(".btn-group");e?e.classList.add("ms-2"):((e=document.createElement("div")).className="btn-group ms-2",t.appendChild(e)),t.insertBefore(a,e),a.addEventListener("click",this.handleAddRecord.bind(this))}}}});SmartTables.prototype.handleAddRecord=function(){o.adding||o.editing?(console.warn("Cannot add record while another operation is in progress"),this.showNotification("Please complete the current operation first","warning")):this.addRecord({},{showNotifications:!0,title:"Add New Employee",submitButtonText:"Create Employee",cancelButtonText:"Cancel"}).catch(e=>{console.error("Error during add operation:",e),o.adding=!1})},i.table.addEventListener("click",e=>{if(e.target.classList.contains("edit-btn")){var t=e.target.getAttribute("data-id");i.edit(t).catch(e=>{console.error("Error during edit operation:",e),o.editing=null})}else if(e.target.classList.contains("delete-btn")){const a=e.target.getAttribute("data-id");i.delete(a).then(()=>{var e=sampleData.findIndex(e=>e.id===a);-1!==e&&(sampleData.splice(e,1),i.options.data.source=sampleData,i.updateTableData(sampleData),void 0!==i.currentSortColumn)&&i.currentSortDirection&&i.sortBy(i.currentSortColumn,i.currentSortDirection)}).catch(e=>{console.error("Error during delete operation:",e)})}}),document.addEventListener("click",e=>{e.target.closest(".add-record-btn")&&i.handleAddRecord()}),document.addEventListener("hidden.bs.modal",()=>{var e;o.editing&&((e=i.table.querySelector(`tbody tr[data-id="${o.editing}"]`))&&e.classList.remove("editing"),o.editing=null),o.saved.forEach(e=>{e=i.table.querySelector(`tbody tr[data-id="${e}"]`);e&&e.classList.add("saved")}),o.adding&&(o.adding=!1)})});