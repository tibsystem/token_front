import ApexCharts from"./thirdparty/apexchart/apexchartsWrapper.js";import{SmartTables}from"./smartTables.bundle.js";document.addEventListener("DOMContentLoaded",function(){"use strict";new ApexCharts(document.querySelector("#marketing-profits-chart"),{chart:{height:350,type:"line",stacked:!1,toolbar:{show:!1},zoom:{enabled:!1},animations:{enabled:!0,easing:"easeinout",speed:800},parentHeightOffset:0,fontFamily:"inherit"},colors:[window.colorMap.primary[300].hex,window.colorMap.warning[300].hex,window.colorMap.success[300].hex],stroke:{width:[0,3,3],curve:"smooth"},fill:{type:["gradient","solid","solid"],gradient:{shade:"light",type:"vertical",shadeIntensity:.5,gradientToColors:[window.colorMap.primary[200].hex],inverseColors:!1,opacityFrom:1,opacityTo:.3}},grid:{show:!0,borderColor:window.colorMap.bootstrapVars.bodyColor.rgba(.07),strokeDashArray:0,position:"back",padding:{left:-5,right:0,top:-20,bottom:-15},xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},plotOptions:{bar:{columnWidth:"50%",endingShape:"rounded",borderRadius:5}},dataLabels:{enabled:!1},markers:{size:4,strokeWidth:0,hover:{size:6}},xaxis:{type:"category",categories:["Jan 2013","Apr 2013","Jul 2013","Oct 2013","Jan 2014","Apr 2014","Jul 2014","Oct 2014","Jan 2015","Apr 2015","Jul 2015","Oct 2015","Jan 2016","Apr 2016"],labels:{style:{colors:window.colorMap.bootstrapVars.bodyColor.rgba(.7),fontSize:"10px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{min:0,max:1200,tickAmount:6,labels:{style:{colors:window.colorMap.bootstrapVars.bodyColor.rgba(.7),fontSize:"10px"},formatter:function(e){return e.toFixed(0)}}},tooltip:{shared:!0,intersect:!1,y:{formatter:function(e){return void 0!==e?e.toFixed(0):e}}},legend:{show:!1},series:[{name:"Target Profit",type:"column",data:[150,650,200,650,800,1050,350,750,500,250,650,250,350,350]},{name:"Actual Profit",type:"line",data:[50,70,90,80,300,950,800,700,650,30,100,80,30,30]},{name:"User Signups",type:"line",data:[650,430,800,350,450,450,450,470,250,830,650,250,350,350]}]}).render(),new ApexCharts(document.querySelector("#returning-target-chart"),{chart:{height:350,type:"area",stacked:!1,toolbar:{show:!1},zoom:{enabled:!1},animations:{enabled:!0,easing:"easeinout",speed:800},parentHeightOffset:0,fontFamily:"inherit"},colors:[window.colorMap.success[200].hex,window.colorMap.primary[200].hex],stroke:{width:2,curve:"straight"},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.4,opacityFrom:.8,opacityTo:.1,stops:[0,90,100]}},grid:{show:!0,borderColor:window.colorMap.bootstrapVars.bodyColor.rgba(.07),strokeDashArray:0,position:"back",padding:{left:5},xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}}},dataLabels:{enabled:!1},markers:{size:4,strokeWidth:0,hover:{size:6}},xaxis:{type:"numeric",categories:[0,100,200,300,400,500,600,700],tickAmount:8,labels:{style:{colors:window.colorMap.bootstrapVars.bodyColor.rgba(.7),fontSize:"10px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{show:!1,max:180,tickAmount:10},tooltip:{shared:!0,intersect:!1,y:{formatter:function(e){return void 0!==e?e.toFixed(0):e}}},legend:{show:!0,position:"top",horizontalAlign:"left",fontSize:"12px",fontFamily:"inherit",offsetY:10,offsetX:-35,itemMargin:{horizontal:10,vertical:0},markers:{width:8,height:8,radius:0}},series:[{name:"Returning Customer",data:[140,120,95,80,60,95,70,50]},{name:"New Customer",data:[110,90,70,55,50,75,50,30]}]}).render();new ApexCharts(document.querySelector("#efficiency-metrics-chart"),{chart:{height:257,type:"area",stacked:!1,toolbar:{show:!1},zoom:{enabled:!1},animations:{enabled:!0,easing:"easeinout",speed:800},parentHeightOffset:0,fontFamily:"inherit"},colors:[window.colorMap.primary[300].hex,window.colorMap.success[300].hex,window.colorMap.warning[300].hex,window.colorMap.info[300].hex],stroke:{width:2,curve:"straight"},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.4,opacityFrom:.8,opacityTo:.1,stops:[0,90,100]}},grid:{show:!0,borderColor:window.colorMap.bootstrapVars.bodyColor.rgba(.07),strokeDashArray:0,position:"back",padding:{top:-25},xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},dataLabels:{enabled:!1},markers:{size:3,strokeWidth:0,hover:{size:5}},xaxis:{type:"category",categories:["2am","3am","4am","5am","6am","7am","8am","9am","1pm","2pm","3pm","4pm"],labels:{style:{colors:window.colorMap.bootstrapVars.bodyColor.rgba(.7),fontSize:"10px"}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{min:0,max:3e5,tickAmount:3,labels:{style:{colors:window.colorMap.bootstrapVars.bodyColor.rgba(.7),fontSize:"10px"},formatter:function(e){return 1e3<=e?e/1e3+"K":e}}},tooltip:{shared:!0,intersect:!1,y:{formatter:function(e){return void 0!==e?1e3<=e?Math.round(e).toLocaleString():e.toFixed(0):e}}},legend:{show:!1},series:[{name:"Sessions",data:[2e4,25e3,4e4,5e4,6e4,15e4,19e4,18e4,2e5,1e5,1e5,9e4]},{name:"New Sessions",data:[15e3,3e4,35e3,6e4,8e4,11e4,23e4,2e5,18e4,23e4,16e4,1e5]},{name:"Bounce Rate",data:[1e4,15e3,2e4,25e3,3e4,4e4,6e4,8e4,1e5,12e4,14e4,16e4]},{name:"Clickthrough",data:[5e3,1e4,15e3,2e4,25e3,3e4,4e4,5e4,6e4,7e4,8e4,9e4]}]}).render(),new SmartTables("sales-performance-table",{data:{type:"json",source:"json/MOCK_DATA_SALES_PERF.json",columns:[{data:"CustomerID",title:"ID"},{data:"Name",title:"Full Name",render:function(e){var t,a;return e?2===(t=e.split(",")).length?(a=t[0].trim(),t[1].trim()+" "+a):e:""}},{data:"PurchaseDate",title:"Purchase Date",render:function(t){if(!t)return"";try{var e=new Date(t);return isNaN(e.getTime())?t:e.getDate().toString().padStart(2,"0")+`-${(e.getMonth()+1).toString().padStart(2,"0")}-`+e.getFullYear()}catch(e){return t}}},{data:"CustomerCVV",title:"CVV",render:function(e){var t;return e?`
                            <div class="d-flex align-items-center">
                                <span id="${t="cvv-"+Math.random().toString(36).substring(2,10)}-masked">***</span>
                                <span id="${t}-actual" class="d-none">${e}</span>
                                <button class="btn btn-link btn-sm p-0 ms-2 cvv-toggle" data-cvv-id="${t}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                                        <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                                        <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                                    </svg>
                                </button>
                            </div>
                        `:""}},{data:"Country",title:"Country",render:function(e){return e?`
                            <div class="d-flex align-items-center">
                                <div class="flag-placeholder d-inline-block me-1 border-faded" 
                                     data-country="${{"United States":"us",USA:"us",US:"us","United Kingdom":"gb",UK:"gb",Canada:"ca",Australia:"au",Germany:"de",France:"fr",Italy:"it",Spain:"es",Japan:"jp",China:"cn",India:"in",Brazil:"br",Mexico:"mx",Russia:"ru"}[e]||e.toLowerCase().substring(0,2)}"
                                     style="width: 20px; height: 15px; background-color: #f5f5f5;">
                                </div>
                                <span>${e}</span>
                            </div>
                        `:""}},{data:"InvoiceAmount",title:"Invoice Amount"},{data:"CustomerEmail",title:"Email"}]},export:!0,print:!0,responsive:!0,hooks:{afterInit:function(){document.addEventListener("click",function(e){var t,a;e.target.closest(".cvv-toggle")&&(a=(e=e.target.closest(".cvv-toggle")).getAttribute("data-cvv-id"),t=document.getElementById(a+"-masked"),a=document.getElementById(a+"-actual"),t)&&a&&(t.classList.contains("d-none")?(t.classList.remove("d-none"),a.classList.add("d-none"),e.innerHTML=`
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                                        <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                                        <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                                    </svg>
                                `):(t.classList.add("d-none"),a.classList.remove("d-none"),e.innerHTML=`
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
                                        <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
                                        <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
                                        <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
                                    </svg>
                                `))}),setTimeout(function(){o()},1e3),document.querySelectorAll(".st-search").forEach(function(e){e.addEventListener("input",function(){clearTimeout(e.searchTimer),e.searchTimer=setTimeout(function(){setTimeout(o,100)},300)})}),document.querySelectorAll("#sales-performance-table th").forEach(function(e){e.addEventListener("click",function(){setTimeout(o,100)})})},onPaginate:function(){setTimeout(function(){o()},50)},onFilter:function(){setTimeout(function(){o()},100)},afterDraw:function(){setTimeout(function(){o()},100)}}});let t=!1,a=!1;function o(){if(!a){a=!0;try{var e=document.querySelectorAll(".flag-placeholder");let o=0;e.forEach(function(e){var t,a=e.closest("tr");a&&null!==a.offsetParent&&(a=e.getAttribute("data-country"))&&((t=document.createElement("img")).src=`https://lipis.github.io/flag-icons/flags/4x3/${a}.svg`,t.alt=a,t.className="d-inline-block me-1 border-faded",t.style.width="20px",t.style.height="auto",e.parentNode.replaceChild(t,e),o++)}),0<o&&console.log(`Loaded ${o} flags for current view`),t=!0}finally{a=!1}}}window.loadTableFlags=o});