!function(m){"use strict";m.appDOM=function(){const r=document.documentElement,l={actionButtons:null,audioCache:new Map},s={debug:!1,focusDelay:200,defaultSoundPath:"media/sound/",maxClassNameLength:50,maxSelectorLength:255,fullscreenConfirmMessage:"Do you want to enter fullscreen mode?",selectors:{actionButtons:"[data-action]"},sound:{preload:!1,volume:1,fadeIn:!1,fadeInDuration:500},classes:{classesToKeep:["hide-page-scrollbar"]},theme:{styleId:"theme-style",defaultTheme:""}},c={containsSubstring:function(e,t){return e&&t?new RegExp(`\\b${t}\\b`,"i").test(e):(d.warn("Invalid parameters for containsSubstring"),!1)},resetStyle:function(){d.group("Reset Style"),document.querySelectorAll(s.selectors.actionButtons).forEach(e=>{("checkbox"===e.type?(e.checked=!1,e.parentNode):e).classList.remove("active")});var e=r.className.split(" ").filter(e=>s.classes.classesToKeep.includes(e)),e=(r.className=e.join(" "),resetSettings(),r.getAttribute("data-bs-theme")||"light");const t="dark"===e;document.querySelectorAll('[data-action="toggle-theme"]').forEach(e=>{e.setAttribute("aria-pressed",t.toString())});e=document.getElementById(s.theme.styleId);return e&&e.remove(),document.querySelectorAll('input[data-action="theme-style"]').forEach(e=>{e.checked=!1}),d.log("Styles reset completed"),d.groupEnd(),c}},i={sanitizeClassName:function(e){var t;return"string"!=typeof e?(d.error("Invalid class name type"),""):e.length>s.maxClassNameLength?(d.error(`Class name exceeds maximum length of ${s.maxClassNameLength} characters`),""):((t=e.replace(/[^a-zA-Z0-9-_]/g,"").replace(/^[0-9-_]/,"").substring(0,s.maxClassNameLength))!==e&&d.warn(`Class name "${e}" contained invalid characters and was sanitized to "${t}"`),t)},sanitizeSelector:function(e){return"string"!=typeof e?(d.error("Invalid selector type"),""):e.length>s.maxSelectorLength?(d.error(`Selector exceeds maximum length of ${s.maxSelectorLength} characters`),""):/<[^>]*>|javascript:|data:|@import|expression|url\(|eval\(|setTimeout|setInterval/i.test(e)?(d.error("Potential malicious selector detected"),""):e.replace(/[<>"'`=\/\\]/g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g,"").trim()},validateDataAttribute:function(e){return"string"!=typeof e?(d.error("Invalid data attribute type"),""):e.length>s.maxClassNameLength?(d.error(`Data attribute exceeds maximum length of ${s.maxClassNameLength} characters`),""):e.replace(/[^a-zA-Z0-9-_]/g,"").substring(0,s.maxClassNameLength)},sanitizeUrl:function(e){return"string"!=typeof e?(d.error("Invalid URL type"),""):2e3<e.length?(d.error("URL exceeds maximum length"),""):(e=e.replace(/[<>"'`]/g,"")).endsWith(".css")?/javascript:|data:|file:|ftp:|@import|expression|eval\(|setTimeout|setInterval/i.test(e)?(d.error("Potentially malicious URL detected"),""):e:(d.error("URL must end with .css"),"")},checkFullscreenPermission:function(){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))return d.error("Fullscreen not supported in this browser"),!1;if(m.self!==m.top)try{if(!m.parent.document.fullscreenEnabled)return d.error("Fullscreen not allowed in iframe"),!1}catch(e){return d.error("Cannot access parent frame for fullscreen permission"),!1}return!0},getClosestElement:function(e,t){if(!e||!t)return d.error("Invalid parameters for getClosestElement"),null;try{return e.closest(t)}catch(e){return d.error("Error finding closest element: "+e.message),null}}},d={log:function(e){s.debug&&console.log("[SmartAdmin] "+e)},error:function(e){s.debug&&console.error("[SmartAdmin Error] "+e)},warn:function(e){s.debug&&console.warn("[SmartAdmin Warning] "+e)},group:function(e){s.debug&&console.group("[SmartAdmin Group] "+e)},groupEnd:function(){s.debug&&console.groupEnd()}},u={sanitizeFilename:function(e){return e.replace(/[^\w.-]/g,"")},fadeInAudio:async function(t,a,e){t.volume=0;var o=a/20;const n=e/20;for(let e=0;e<=20;e++)await new Promise(e=>setTimeout(e,n)),t.volume=Math.min(a,e*o)},createAudioElement:function(e,t,a){var o=new Audio;return o.src=""+e+t,o.volume=a,o},stopAllSoundsExcept:function(a){l.audioCache.forEach((e,t)=>{t===a||e.paused||(e.pause(),e.currentTime=0,document.querySelectorAll(`[data-audio-playing="${t}"]`).forEach(e=>e.removeAttribute("data-audio-playing")))})}},t={debounce:function(t,a){let o;return function(...e){clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),t(...e)},a)}},validateElement:function(e,t){return!!e||(d.error(t+" element not found"),!1)},extractColors:function(){d.group("Color Extraction"),m.colorMap?d.log("Using existing colorMap object"):(m.colorMap={},d.log("Created new colorMap object"));var e=["primary","danger","success","warning","info"];const t=Array.from({length:17},(e,t)=>50*(t+1)).filter(e=>e<=900);var a=[{name:"bodyBg",style:"background-color: var(--bs-body-bg)"},{name:"bodyBgRgb",style:"background-color: rgb(var(--bs-body-bg-rgb))"},{name:"bodyColor",style:"color: var(--bs-body-color)"},{name:"bodyColorRgb",style:"color: rgb(var(--bs-body-color-rgb))"}];const n=document.createElement("ul");n.style.display="none",e.forEach(a=>{t.forEach(e=>{var t=document.createElement("li");t.className=`bg-${a}-`+e,n.appendChild(t)})}),a.forEach(e=>{var t=document.createElement("li");t.style.cssText=e.style,t.dataset.varName=e.name,n.appendChild(t)});var o=document.createElement("div");o.id="color-extraction-container",o.appendChild(n),document.body.appendChild(o);const r=e=>{var t,a,o;return e&&"rgba(0, 0, 0, 0)"!==e&&"transparent"!==e?([t,a,o]=e.match(/\d+/g).map(Number),{r:t,g:a,b:o,formatted:e,values:t+`, ${a}, `+o}):{r:0,g:0,b:0,formatted:"rgb(0, 0, 0)",values:"0, 0, 0"}};e.forEach(o=>{m.colorMap[o]||(m.colorMap[o]={}),t.forEach(e=>{var t=n.querySelector(`.bg-${o}-`+e),t=m.getComputedStyle(t).backgroundColor;const a=r(t);m.colorMap[o][e]={hex:this.rgbToHex(t),rgb:a.formatted,rgba:(e=1)=>`rgba(${a.values}, ${e})`,values:a.values}})}),m.colorMap.bootstrapVars?d.log("Updating existing bootstrapVars in colorMap"):(m.colorMap.bootstrapVars={},d.log("Created bootstrapVars in colorMap")),a.forEach(e=>{var t=n.querySelector(`[data-var-name="${e.name}"]`),a=e.name.includes("bodyColor")?"color":"backgroundColor",t=m.getComputedStyle(t)[a];const o=r(t);m.colorMap.bootstrapVars[e.name]={hex:this.rgbToHex(t),rgb:o.formatted,rgba:(e=1)=>`rgba(${o.values}, ${e})`,values:o.values}}),o.remove(),m.dispatchEvent(new Event("colorMapReady")),d.log("Color extraction completed"),d.groupEnd()},rgbToHex:function(e){var t,a;return e&&"rgba(0, 0, 0, 0)"!==e&&"transparent"!==e?([e,t,a]=e.match(/\d+/g).map(Number),"#"+((1<<24)+(e<<16)+(t<<8)+a).toString(16).slice(1).padStart(6,"0")):null}},e={enter:function(){try{if(document.documentElement.requestFullscreen)return document.documentElement.requestFullscreen();if(document.documentElement.webkitRequestFullscreen)return document.documentElement.webkitRequestFullscreen();if(document.documentElement.mozRequestFullScreen)return document.documentElement.mozRequestFullScreen();if(document.documentElement.msRequestFullscreen)return document.documentElement.msRequestFullscreen();throw new Error("No fullscreen API available")}catch(e){return d.error("Fullscreen error: "+e.message),Promise.reject(e)}},exit:function(){try{if(document.exitFullscreen)return document.exitFullscreen();if(document.webkitExitFullscreen)return document.webkitExitFullscreen();if(document.mozCancelFullScreen)return document.mozCancelFullScreen();if(document.msExitFullscreen)return document.msExitFullscreen();throw new Error("No fullscreen API available")}catch(e){return d.error("Fullscreen exit error: "+e.message),Promise.reject(e)}},isFullscreen:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}},g=(c.updateThemeButtonsState=function(){const t="dark"===(r.getAttribute("data-bs-theme")||"light");return document.querySelectorAll('[data-action="toggle-theme"]').forEach(e=>{e.setAttribute("aria-pressed",t.toString()),d.log(`Updated aria-pressed to ${t} on theme toggle button`)}),c},c.updateThemeStyleStates=function(){d.group("Updating Theme Style States");var e=document.getElementById("theme-style");if(e&&e.getAttribute("href")){const o=e.getAttribute("href").split("/").pop().replace(".css","").trim();d.log("Current theme style: "+o),document.querySelectorAll("[data-theme-style]").forEach(e=>{var t,a=e.getAttribute("data-theme-style");a&&(t=a===o,e.setAttribute("aria-selected",t?"true":"false"),r.classList.add("theme-active"),"radio"===e.type?(e.checked=t,d.log(`Radio button ${a}: checked=`+t)):(t?e.classList.add("active"):e.classList.remove("active"),d.log(`Element ${a}: active=`+t)))})}else d.log("No theme style element or href found");return d.groupEnd(),c},c.setThemeStyle=function(t){if(d.group("Setting Theme Style"),t)if(t=i.sanitizeUrl(t)){let e=document.getElementById(s.theme.styleId);e?(d.log("Updating existing theme link: "+t),e.href=t):(d.log("Creating new theme link: "+t),(e=document.createElement("link")).id=s.theme.styleId,e.rel="stylesheet",e.media="screen",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)),c.updateThemeStyleStates();t=new CustomEvent("themeStyleChange",{detail:{theme:t}});document.dispatchEvent(t),"function"==typeof m.saveSettings&&(d.log("Saving theme selection to local storage"),m.saveSettings())}else d.error("Invalid theme URL");else d.error("Empty theme URL provided");return d.groupEnd(),c},c.checkActiveStyles=function(e,t){d.group("Checking Active Styles");e=r.className.split(" ")||e,(document.querySelectorAll(s.selectors.actionButtons)||t).forEach(e=>{("checkbox"===e.type?(e.checked=!1,e.parentNode):e).classList.remove("active")}),e.forEach(e=>{e=i.sanitizeClassName(e);document.querySelectorAll(`[data-class="${e}"]`).forEach(e=>{("checkbox"===e.type?(e.checked=!0,e.parentNode):e).classList.add("active")})}),t=document.getElementById(s.theme.styleId);return t&&c.updateThemeStyleStates(),d.groupEnd(),c},{toggle:function(e){var t=e.getAttribute("data-class");if(t){var t=i.sanitizeClassName(t),a=e.getAttribute("data-dependency"),o=e.getAttribute("data-codependence"),e=e.getAttribute("data-focus");if(d.group("Toggle Action"),d.log("Toggling class: "+t),r.classList.toggle(t),a&&a.split(" ").forEach(e=>{e=i.sanitizeClassName(e);r.classList.add(e),d.log("Added dependency class: "+e)}),o&&o.split(" ").forEach(e=>{e=i.sanitizeClassName(e);r.classList.remove(e),d.log("Removed codependency class: "+e)}),e){const n=i.validateDataAttribute(e);setTimeout(()=>{var e=document.getElementById(n);e&&e.focus(),d.log("Focus set to element: "+n)},s.focusDelay)}"function"==typeof m.saveSettings&&(m.saveSettings(),d.log("🔑 Settings saved")),c.checkActiveStyles(),d.groupEnd()}else d.error("Missing required data-class attribute for toggle action")},toggleReplace:function(e){var t=i.sanitizeSelector(e.getAttribute("data-target")),a=i.sanitizeClassName(e.getAttribute("data-removeclass"))||"",e=i.sanitizeClassName(e.getAttribute("data-addclass")),o=document.querySelector(t);d.group("Toggle Replace Action"),o?(o.classList.remove(a),o.classList.add(e),d.log(`Replaced class "${a}" with "${e}" on `+t)):d.error("Target element not found: "+t),d.groupEnd()},toggleSwap:function(e){var t,a=e.getAttribute("data-target"),a=a?i.sanitizeSelector(a):"html",e=i.sanitizeClassName(e.getAttribute("data-toggleclass"));d.group("Toggle Swap Action"),e?(t=document.querySelector(a))?(t.classList.toggle(e),d.log(`Toggled class "${e}" on `+a),c.containsSubstring(a,"drawer")&&(r.classList.toggle("hide-page-scrollbar"),d.log("Toggled page scrollbar"))):d.error("Target element not found: "+a):d.error("Missing required toggleclass attribute for toggle-swap, defaulting to HTML target"),d.groupEnd()},panelActions:{hideTooltips:function(e){e.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(e=>{e=bootstrap.Tooltip.getInstance(e);e&&e.hide()})},collapse:function(e){d.group("Panel Collapse Action");var t,e=i.getClosestElement(e,".panel");if(e){this.hideTooltips(e);const a=e.querySelector(".panel-container");a?(a.style.transition="height 0.35s ease",t=a.scrollHeight,e.classList.contains("panel-collapsed")?(a.style.height="0",a.style.overflow="hidden",a.offsetHeight,e.classList.remove("panel-collapsed"),a.style.height=t+"px",setTimeout(function(){a.style.overflow="visible",a.style.height="auto"},350),d.log("Panel uncollapsed: "+e.id)):(a.style.height=t+"px",a.style.overflow="hidden",a.offsetHeight,e.classList.add("panel-collapsed"),a.style.height="0",d.log("Panel collapsed: "+e.id)),savePanelState()):d.error("Panel container not found")}else d.error("Panel element not found");d.groupEnd()},fullscreen:function(e){d.group("Panel Fullscreen Action");e=i.getClosestElement(e,".panel");e?(this.hideTooltips(e),e.classList.toggle("panel-fullscreen"),document.documentElement.classList.toggle("panel-fullscreen"),d.log("Panel fullscreen toggled: "+e.id)):d.error("Panel element not found"),d.groupEnd()},close:function(t){d.group("Panel Close Action");const a=i.getClosestElement(t,".panel");if(a){this.hideTooltips(a),t=a.querySelector(".panel-hdr h2")?.textContent.trim()||"Untitled Panel";const o=()=>{a.style.transition="opacity 0.5s",a.style.opacity="0",setTimeout(()=>{a.remove(),d.log("Panel removed: "+a.id)},500)};let e=document.getElementById("panelDeleteModal");e||(document.body.insertAdjacentHTML("beforeend",`
                            <div class="modal fade" id="panelDeleteModal" tabindex="-1" aria-hidden="true" style="--bs-modal-width: 450px;">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content bg-dark bg-opacity-50 shadow-5 translucent-dark">
                                        <div class="modal-header border-bottom-0">
                                            <h4 class="modal-title text-white d-flex align-items-center">
                                                Delete Panel?
                                            </h4>
                                            <button type="button" class="btn btn-system btn-system-light ms-auto" data-bs-dismiss="modal" aria-label="Close">
                                                <svg class="sa-icon sa-icon-2x">
                                                    <use href="img/sprite.svg#x"></use>
                                                </svg>
                                            </button>
                                        </div>
                                        <div class="modal-body"></div>
                                        <div class="modal-footer border-top-0">
                                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">No, cancel</button>
                                            <button type="button" class="btn btn-danger" id="confirmPanelDelete">Yes, delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>`),e=document.getElementById("panelDeleteModal")),e.querySelector(".modal-body").innerHTML=`
                    <div class="alert alert-danger bg-danger border-danger text-danger border-opacity-50 bg-opacity-10 mb-0">
                        You are about to delete <span class="fw-700">${t}.</span>
                        Are you sure you want to delete this panel?
                    </div>`;const n=new bootstrap.Modal(e),r=e.querySelector("#confirmPanelDelete"),l=()=>{o(),n.hide(),r.removeEventListener("click",l)};r.addEventListener("click",l),n.show(),e.addEventListener("hidden.bs.modal",()=>{r.removeEventListener("click",l)},{once:!0})}else d.error("Panel element not found");d.groupEnd()},style:function(e){d.group("Panel Style Action");var t=i.getClosestElement(e,".panel");if(t){const a=t.querySelector(".panel-hdr");a?(t=e.getAttribute("data-panel-style"))?0===(e=t.split(" ").map(e=>i.sanitizeClassName(e.trim())).filter(e=>e.startsWith("bg-"))).length?d.error("No valid bg-* classes specified"):(Array.from(a.classList).filter(e=>e.startsWith("bg-")).forEach(e=>{a.classList.remove(e)}),e.forEach(e=>{a.classList.add(e),d.log("Added panel style: "+e)}),savePanelState()):d.error("No style classes specified"):d.error("Panel header not found")}else d.error("Panel element not found");d.groupEnd()},toggleClass:function(e){d.group("Panel Toggle Class Action");var t=i.getClosestElement(e,".panel");t?(e=i.sanitizeClassName(e.getAttribute("data-panel-toggle")))?(t.classList.toggle(e),d.log("Panel class toggled: "+e),savePanelState()):d.error("No toggle class specified"):d.error("Panel element not found"),d.groupEnd()},reset:function(e){d.group("Panel Reset Action");const t=i.getClosestElement(e,".panel");if(t){e=Array.from(t.classList);const a=t.querySelector(".panel-hdr");e.forEach(e=>{["panel","panel-collapsed","panel-fullscreen"].includes(e)||t.classList.remove(e)}),a&&Array.from(a.classList).forEach(e=>{"panel-hdr"!==e&&a.classList.remove(e)}),d.log("Panel reset to default state"),savePanelState()}else d.error("Panel element not found");d.groupEnd()},refresh:function(e){d.group("Panel Refresh Action");const t=i.getClosestElement(e,".panel");if(t){var a=parseInt(e.getAttribute("data-refresh-duration"))||1e3;if(t.classList.contains("panel-refreshing"))d.warn("Panel is already refreshing");else{t.classList.add("panel-refreshing"),d.log("Panel refresh started");e=e.getAttribute("data-refresh-callback");if(e&&"function"==typeof m[e])try{m[e](t),d.log("Executed callback: "+e)}catch(e){d.error("Error in refresh callback: "+e.message)}setTimeout(()=>{t.classList.remove("panel-refreshing"),d.log("Panel refresh completed")},a)}}else d.error("Panel element not found");d.groupEnd()}},toggleTheme:function(){d.group("Toggle Theme Action");var e="light"===(r.getAttribute("data-bs-theme")||"light")?"dark":"light";r.setAttribute("data-bs-theme",e),d.log("Theme switched to: "+e),c.updateThemeButtonsState(),"function"==typeof m.saveSettings&&(m.saveSettings(),d.log("Theme settings saved")),setTimeout(()=>{t.extractColors(),d.log("Colors re-extracted after theme change")},100),d.groupEnd()},removeClass:function(e){var t=i.sanitizeSelector(e.getAttribute("data-target")),e=i.sanitizeClassName(e.getAttribute("data-classname")),a=document.querySelector(t);d.group("Remove Class Action"),a?.classList.contains(e)&&(a.classList.remove(e),d.log(`Removed class "${e}" from `+t)),"html"===t&&"function"==typeof m.saveSettings&&(m.saveSettings(),c.checkActiveStyles(),d.log("Settings saved")),d.groupEnd()},addClass:function(e){var t=i.sanitizeSelector(e.getAttribute("data-target")),e=i.sanitizeClassName(e.getAttribute("data-classname")),a=document.querySelector(t);d.group("Add Class Action"),a?(a.classList.add(e),d.log(`Added class "${e}" to `+t)):d.error("Target element not found: "+t),"html"===t&&"function"==typeof m.saveSettings&&(m.saveSettings(),c.checkActiveStyles(),d.log("Settings saved")),d.groupEnd()},appFullscreen:function(){d.group("Fullscreen Action"),i.checkFullscreenPermission()?e.isFullscreen()?e.exit().then(()=>d.log("Exited fullscreen mode")).catch(e=>d.error("Fullscreen exit error: "+e.message)):m.confirm(s.fullscreenConfirmMessage)&&e.enter().then(()=>d.log("Entered fullscreen mode")).catch(e=>d.error("Fullscreen error: "+e.message)):d.error("Fullscreen permission denied"),d.groupEnd()},playSound:async function(o){d.group("Play Sound Action");try{var e=o.getAttribute("data-soundfile");if(!e)throw new Error("No sound file specified");var t=u.sanitizeFilename(e);if(o.getAttribute("data-audio-playing")!==t){u.stopAllSoundsExcept(t);var n=s.defaultSoundPath;let a=l.audioCache.get(t);return a||(a=u.createAudioElement(n,t,s.sound.volume),l.audioCache.set(t,a)),a.currentTime=0,s.sound.fadeIn&&await u.fadeInAudio(a,s.sound.volume,s.sound.fadeInDuration),await a.play(),o.setAttribute("data-audio-playing",t),d.log("Playing sound: "+n+t),new Promise((e,t)=>{a.addEventListener("ended",()=>{o.removeAttribute("data-audio-playing"),e()},{once:!0}),a.addEventListener("error",e=>t(e),{once:!0})})}g.pauseSound(o)}catch(e){throw d.error("Failed to play sound: "+e.message),e}finally{d.groupEnd()}},pauseSound:function(e){d.group("Pause Sound Action");try{var t,a=e.getAttribute("data-audio-playing");a?(t=l.audioCache.get(a))&&(t.pause(),t.currentTime=0,e.removeAttribute("data-audio-playing"),d.log("Paused sound: "+a)):d.log("No sound currently playing")}catch(e){d.error("Failed to pause sound: "+e.message)}finally{d.groupEnd()}},themeStyle:function(t){d.group("Theme Style Action");t=t.getAttribute("data-theme-style");if(null===t)d.error("Missing data-theme-style attribute");else{if(""===t){var e=document.getElementById(s.theme.styleId);e&&(e.remove(),d.log("Theme style removed"))}else{let e=t;e.endsWith(".css")||(e=`css/${e}.css`),c.setThemeStyle(e)}c.updateThemeStyleStates(),"function"==typeof m.saveSettings&&m.saveSettings(),d.log("Theme style changed to: "+t)}d.groupEnd()}});function a(e){const t=e.target.closest(s.selectors.actionButtons);var a;t&&((a={toggle:()=>g.toggle(t),"toggle-replace":()=>g.toggleReplace(t),"toggle-swap":()=>g.toggleSwap(t),"remove-class":()=>g.removeClass(t),"add-class":()=>g.addClass(t),"app-fullscreen":()=>g.appFullscreen(),playsound:()=>g.playSound(t),pausesound:()=>g.pauseSound(t),"panel-collapse":()=>g.panelActions.collapse(t),"panel-fullscreen":()=>g.panelActions.fullscreen(t),"panel-close":()=>g.panelActions.close(t),"panel-style":()=>g.panelActions.style(t),"panel-toggle":()=>g.panelActions.toggleClass(t),"panel-reset":()=>g.panelActions.reset(t),"panel-refresh":()=>g.panelActions.refresh(t),"toggle-theme":()=>g.toggleTheme(),"theme-style":()=>g.themeStyle(t)}[e=i.validateDataAttribute(t.dataset.action)])?(a(),d.log("Action executed: "+e)):d.warn("Unknown action type: "+e))}return c.preloadSound=function(e){var t,e=u.sanitizeFilename(e);return l.audioCache.has(e)||(t=u.createAudioElement(s.defaultSoundPath,e,s.sound.volume),l.audioCache.set(e,t)),c},c.config=function(e){return Object.assign(s,e),d.log("Configuration updated"),c},c.debug=function(e){var t="app-debug-mode";return(s.debug=e)?document.body.classList.add(t):document.body.classList.remove(t),d.log("Debug mode "+(e?"enabled":"disabled")),c},c.toggleTheme=function(){return g.toggleTheme(),c},c.switchThemeStyle=function(e){return e?(c.setThemeStyle(e),c.updateThemeStyleStates()):d.error("Theme URL is required"),c},c.updateThemeButtonsState=function(){const t="dark"===(r.getAttribute("data-bs-theme")||"light");return document.querySelectorAll('[data-action="toggle-theme"]').forEach(e=>{e.setAttribute("aria-pressed",t.toString()),d.log(`Updated aria-pressed to ${t} on theme toggle button`)}),c},c.toggleClass=function(e,t){var a;return e&&t?((a=document.createElement("button")).setAttribute("data-action","toggle"),a.setAttribute("data-class",t),a.setAttribute("data-target",e),g.toggle(a)):d.error("Target and className are required for toggleClass"),c},c.toggleReplace=function(e,t,a){var o;return e&&a?((o=document.createElement("button")).setAttribute("data-action","toggle-replace"),o.setAttribute("data-target",e),o.setAttribute("data-addclass",a),t&&o.setAttribute("data-removeclass",t),g.toggleReplace(o)):d.error("Target and addClass are required for toggleReplace"),c},c.toggleSwap=function(e,t){var a;return e&&t?((a=document.createElement("button")).setAttribute("data-action","toggle-swap"),a.setAttribute("data-target",e),a.setAttribute("data-toggleclass",t),g.toggleSwap(a)):d.error("Target and toggleClass are required for toggleSwap"),c},c.destroy=function(){document.removeEventListener("click",a),l.actionButtons=null,l.audioCache.forEach(e=>{e.pause(),e.src=""}),l.audioCache.clear(),d.log("Plugin destroyed")},document.addEventListener("click",a),document.addEventListener("DOMContentLoaded",function(){l.actionButtons=document.querySelectorAll(s.selectors.actionButtons),c.checkActiveStyles(),t.extractColors(),c.updateThemeStyleStates(),c.updateThemeButtonsState()}),d.log("Plugin initialized"),c}()}(window);