!function(m,y){"use strict";function e(e,t){for(var i="string"==typeof e?y.querySelectorAll(e):[e],s=0;s<i.length;s++){var o=i[s];if(o){if(!o.getAttribute("data-slimscroll-initialized")){for(var l in o.setAttribute("data-slimscroll-initialized","true"),this.element=o,this.options={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",offsetX:"1px",offsetY:"0px",start:"top",opacity:.4,fadeOutSpeed:500,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},t)t.hasOwnProperty(l)&&(this.options[l]=t[l]);this.init()}}else console.error("smartSlimScroll: Element not found")}}e.prototype={init:function(){const n=this,c=new WeakMap,h=(c.set(n,{isOverPanel:!1,isOverBar:!1,isDragg:!1,queueHide:null,touchDif:0,barHeight:0,percentScroll:0,lastScroll:0,minBarHeight:30,releaseScroll:!1,isScrolling:!1,scrollTimeout:null,isOverRail:!1,firstHover:!0}),this.options),d=this.element;let u,o,p;var t=e=>e.replace(/[<>]/g,"");h.width=t(h.width),h.height=t(h.height),h.color=t(h.color),h.railColor=t(h.railColor);const e=e=>{var t,i=c.get(n);i.releaseScroll||e.preventDefault(),e.touches?.length&&(t=(i.touchDif-e.touches[0].pageY)/h.touchScrollStep,f(Math.min(Math.max(t,-50),50),!0),i.touchDif=e.touches[0].pageY)},i=function(t){const i=c.get(n);if(i.isOverPanel){i.isScrolling=!0,g(),clearTimeout(i.scrollTimeout);let e=0;t.wheelDelta&&(e=-t.wheelDelta/120),t.detail&&(e=t.detail/3),t.deltaY&&(e=t.deltaY/120);var s=d.scrollHeight,o=u.offsetHeight,l=d.scrollTop,r=e<0,a=0<e;(r&&!(l<=0)||a&&!(s-o<=l)||o<s)&&(t.preventDefault(),t.stopPropagation(),t.returnValue=!1,f(e,!0)),i.scrollTimeout=setTimeout(function(){i.isScrolling=!1,v()},1e3)}},s=new IntersectionObserver(e=>{e.forEach(e=>{(e.isIntersecting?g:v)()})});s.observe(d);t=()=>{s.disconnect(),u.removeEventListener("touchmove",e),u.removeEventListener("wheel",i)};c.get(n).cleanup=t;try{if(!d.parentNode.classList.contains(h.wrapperClass)){(u=y.createElement("div")).className=h.wrapperClass,u.style.position="relative",u.style.overflow="hidden",u.style.width=h.width,u.style.height=h.height,d.style.overflow="hidden",d.style.width=h.width,d.style.height=h.height,(p=y.createElement("div")).className=h.barClass,p.style.position="absolute",p.style.top=h.offsetY,p.style.width=h.size,p.style.opacity="0",p.style.background=h.color,p.style.borderRadius=h.borderRadius,p.style.transition="opacity 0.2s linear",p.style.zIndex="99",(o=y.createElement("div")).className=h.railClass,o.style.position="absolute",o.style.top=h.offsetY,o.style.width=h.size,o.style.height=`calc(100% - ${2*parseInt(h.offsetY)}px)`,o.style.opacity="0",o.style.background=h.railColor,o.style.borderRadius=h.railBorderRadius,o.style.transition="opacity 0.2s linear",o.style.zIndex="90";var l,r="right"===h.position?{right:h.offsetX}:{left:h.offsetX};for(l in r)o.style[l]=r[l],p.style[l]=r[l];d.parentNode.insertBefore(u,d),u.appendChild(d),u.appendChild(p),u.appendChild(o);var a=function(){var e=c.get(n),t=parseInt(h.offsetY)||0,t=u.offsetHeight-2*t,e=(e.barHeight=Math.max(t/d.scrollHeight*t,e.minBarHeight),p.style.height=e.barHeight+"px",e.barHeight>=t?"none":"block");p.style.display=e},f=(a(),function(e,t,i){var s=c.get(n),o=(s.releaseScroll=!1,e),l=parseInt(h.offsetY)||0,r=u.offsetHeight-2*l,a=r-p.offsetHeight;t&&(o=parseInt(p.style.top||l)+e*parseInt(h.wheelStep)/100*p.offsetHeight,o=Math.min(Math.max(o,l),a+l),o=0<e?Math.ceil(o):Math.floor(o),p.style.top=o+"px"),s.percentScroll=(parseInt(p.style.top||0)-l)/(r-p.offsetHeight),o=s.percentScroll*(d.scrollHeight-u.offsetHeight),i&&(t=(o=e)/d.scrollHeight*r+l,t=Math.min(Math.max(t,l),a+l),p.style.top=t+"px"),d.scrollTop=o,g(),v()}),g=function(){var e=c.get(n);a(),clearTimeout(e.queueHide),d.scrollHeight>u.offsetHeight&&(e.isOverPanel||e.isOverBar||e.isOverRail||e.isDragg||e.isScrolling)&&(p.style.opacity=h.opacity,o.style.opacity=h.railOpacity,!e.isOverPanel||e.isOverBar||e.isOverRail||e.isDragg||e.isScrolling||(clearTimeout(e.queueHide),e.queueHide=setTimeout(function(){v()},h.fadeOutSpeed)))},v=function(){const e=c.get(n);h.alwaysVisible||(clearTimeout(e.queueHide),e.queueHide=setTimeout(function(){e.isOverBar||e.isOverRail||e.isDragg||e.isScrolling||h.disableFadeOut||(p.style.opacity=0,o.style.opacity=0)},h.fadeOutSpeed))};m.addEventListener?(u.addEventListener("mousewheel",i,{passive:!1,capture:!0}),u.addEventListener("DOMMouseScroll",i,{passive:!1,capture:!0}),u.addEventListener("wheel",i,{passive:!1,capture:!0}),d.addEventListener("mousewheel",i,{passive:!1,capture:!0}),d.addEventListener("DOMMouseScroll",i,{passive:!1,capture:!0}),d.addEventListener("wheel",i,{passive:!1,capture:!0}),u.addEventListener("touchmove",e,{passive:!1,capture:!0})):(u.attachEvent("onmousewheel",i),d.attachEvent("onmousewheel",i),u.attachEvent("touchmove",e)),a(),"bottom"===h.start?(p.style.top=u.offsetHeight-p.offsetHeight+"px",f(0,!0)):"top"!==h.start&&(f(y.querySelector(h.start).offsetTop,null,!0),h.alwaysVisible||(p.style.display="none"));p.addEventListener("mouseenter",function(){c.get(n).isOverBar=!0,g()}),p.addEventListener("mouseleave",function(){var e=c.get(n);e.isOverBar=!1,e.isDragg||v()}),u.addEventListener("mouseenter",function(){c.get(n).isOverPanel=!0,d.scrollHeight>u.offsetHeight&&g()}),u.addEventListener("mouseleave",function(e){var t=c.get(n);e.relatedTarget&&(e.relatedTarget.closest("."+h.barClass)||e.relatedTarget.closest("."+h.railClass))||(t.isOverPanel=!1,v())}),u.addEventListener("touchstart",function(e){e.touches.length&&(c.get(n).touchDif=e.touches[0].pageY)}),p.addEventListener("mousedown",function(e){const t=c.get(n),i=(t.isDragg=!0,g(),p.classList.add("dragging"),parseInt(h.offsetY)||0);function s(e){e=l+e.pageY-r,e=Math.min(Math.max(e,i),u.offsetHeight-p.offsetHeight-i),p.style.top=e+"px",f(0,e,!1)}function o(){t.isDragg=!1,p.classList.remove("dragging"),t.isOverBar||v(),y.removeEventListener("mousemove",s),y.removeEventListener("mouseup",o)}var l=parseFloat(p.style.top)||i,r=e.pageY;return y.addEventListener("mousemove",s),y.addEventListener("mouseup",o),!1}),o.addEventListener("mouseenter",function(){c.get(n).isOverRail=!0,g()}),o.addEventListener("mouseleave",function(){var e=c.get(n);e.isOverRail=!1,e.isDragg||v()}),o.addEventListener("mousedown",function(e){c.get(n);var t=o.getBoundingClientRect(),e=e.clientY-t.top,t=parseInt(h.offsetY)||0,i=u.offsetHeight-2*t,s=p.offsetHeight/2,e=Math.min(Math.max(e-s,0),i-p.offsetHeight),s=(p.style.top=e+t+"px",e/(i-p.offsetHeight)),t=s*(d.scrollHeight-u.offsetHeight);d.scrollTop=t,g()}),y.addEventListener("mousemove",function e(t){t=y.elementFromPoint(t.clientX,t.clientY);t&&(u.contains(t)||u===t)&&(c.get(n).isOverPanel=!0,d.scrollHeight>u.offsetHeight)&&g(),y.removeEventListener("mousemove",e)},{once:!0})}}catch(e){throw console.error("smartSlimScroll initialization failed:",e),t(),e}},destroy:function(){try{var e=privateState.get(this);e.cleanup&&e.cleanup(),this.element.style="",this.element.parentNode.replaceChild(this.element,this.element.parentNode)}catch(e){console.error("smartSlimScroll destruction failed:",e)}}},m.smartSlimScroll=e}(window,document);