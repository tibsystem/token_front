const eventData=[{id:"1",title:"Team Meeting",start:new Date((new Date).setHours(10,0)),end:new Date((new Date).setHours(11,30)),backgroundColor:"var(--primary-500)",borderColor:"var(--primary-600)",description:"Weekly team status meeting",location:"Conference Room A"},{id:"2",title:"Client Call",start:new Date((new Date).setDate((new Date).getDate()+1)),allDay:!0,backgroundColor:"var(--success-500)",borderColor:"var(--success-600)",description:"Quarterly review with major client",location:"Zoom Meeting"},{id:"3",title:"Product Launch",start:new Date((new Date).setDate((new Date).getDate()+3)),end:new Date((new Date).setDate((new Date).getDate()+3)).setHours(15,0),backgroundColor:"var(--danger-500)",borderColor:"var(--danger-600)",description:"New product launch event",location:"Main Auditorium"},{id:"4",title:"Deadline: Q3 Report",start:new Date((new Date).setDate((new Date).getDate()+5)),allDay:!0,backgroundColor:"var(--warning-500)",borderColor:"var(--warning-600)",description:"Submit quarterly financial reports",location:"Finance Department"},{id:"5",title:"Training Session",start:new Date((new Date).setDate((new Date).getDate()-2)),end:new Date((new Date).setDate((new Date).getDate()-2)).setHours(16,0),backgroundColor:"var(--info-500)",borderColor:"var(--info-600)",description:"New software training for all employees",location:"Training Room B"},{id:"6",title:"Board Meeting",start:new Date((new Date).setDate((new Date).getDate()+7)),allDay:!0,backgroundColor:"var(--danger-500)",borderColor:"var(--danger-700)",description:"Annual board meeting with stakeholders",location:"Executive Boardroom"},{id:"7",title:"Website Maintenance",start:new Date((new Date).setDate((new Date).getDate()-1)).setHours(23,0),end:new Date((new Date).setDate((new Date).getDate())).setHours(5,0),backgroundColor:"var(--info-500)",borderColor:"var(--info-600)",description:"Scheduled website maintenance window",location:"IT Department"},{id:"8",title:"Team Building",start:new Date((new Date).setDate((new Date).getDate()+12)),end:new Date((new Date).setDate((new Date).getDate()+12)).setHours(16,0),backgroundColor:"var(--primary-300)",borderColor:"var(--primary-400)",description:"Annual team building activities",location:"City Park"},{id:"9",title:"Client Dinner",start:new Date((new Date).setDate((new Date).getDate()+4)).setHours(19,0),end:new Date((new Date).setDate((new Date).getDate()+4)).setHours(21,0),backgroundColor:"var(--success-300)",borderColor:"var(--success-400)",description:"Dinner with potential investors",location:"Downtown Restaurant"},{id:"10",title:"Vacation",start:new Date((new Date).setDate((new Date).getDate()+14)),end:new Date((new Date).setDate((new Date).getDate()+21)),backgroundColor:"var(--bs-teal)",borderColor:"var(--bs-teal)",description:"Annual vacation time",location:"Beach Resort"},{id:"11",title:"Marketing Campaign",start:new Date((new Date).setDate((new Date).getDate()+2)),end:new Date((new Date).setDate((new Date).getDate()+2)).setHours(17,0),backgroundColor:"var(--bs-purple)",borderColor:"var(--bs-purple)",description:"Launch new product marketing campaign",location:"Marketing Department",category:"marketing"},{id:"12",title:"Sales Meeting",start:new Date((new Date).setDate((new Date).getDate()+3)).setHours(9,0),end:new Date((new Date).setDate((new Date).getDate()+3)).setHours(10,30),backgroundColor:"var(--success-600)",borderColor:"var(--success-700)",description:"Monthly sales team catchup",location:"Conference Room B",category:"sales"},{id:"13",title:"Development Sprint Review",start:new Date((new Date).setDate((new Date).getDate()+6)).setHours(14,0),end:new Date((new Date).setDate((new Date).getDate()+6)).setHours(16,0),backgroundColor:"var(--bs-indigo)",borderColor:"var(--bs-indigo)",description:"End of sprint review with stakeholders",location:"Dev Team Area",category:"development"},{id:"14",title:"Tech Conference",start:new Date((new Date).setDate((new Date).getDate()+8)),end:new Date((new Date).setDate((new Date).getDate()+10)),backgroundColor:"var(--bs-indigo)",borderColor:"var(--bs-indigo)",description:"Annual tech conference for industry professionals",location:"Convention Center",category:"conference"},{id:"15",title:"Dentist Appointment",start:new Date((new Date).setDate((new Date).getDate()+2)).setHours(14,0),end:new Date((new Date).setDate((new Date).getDate()+2)).setHours(15,0),backgroundColor:"var(--warning-500)",borderColor:"var(--warning-600)",description:"Routine dental checkup",location:"Downtown Clinic",category:"personal"},{id:"16",title:"Project Milestone: Beta Release",start:new Date((new Date).setDate((new Date).getDate()+15)),allDay:!0,backgroundColor:"var(--success-500)",borderColor:"var(--success-600)",description:"Beta release of the new app",location:"Development Team",category:"development"},{id:"17",title:"Company Announcement",start:new Date((new Date).setDate((new Date).getDate()+1)).setHours(11,0),end:new Date((new Date).setDate((new Date).getDate()+1)).setHours(11,30),backgroundColor:"var(--primary-500)",borderColor:"var(--primary-600)",description:"Announcement of new company policies",location:"Main Hall",category:"announcement"},{id:"18",title:"Weekly Team Sync",start:new Date((new Date).setDate((new Date).getDate()+4)).setHours(9,0),end:new Date((new Date).setDate((new Date).getDate()+4)).setHours(9,30),backgroundColor:"var(--primary-400)",borderColor:"var(--primary-500)",description:"Recurring weekly sync for project updates",location:"Meeting Room C",category:"team",extendedProps:{recurrence:"weekly"}}],eventCategories=[{id:"general",name:"General",color:"var(--primary-500)"},{id:"meeting",name:"Meetings",color:"var(--success-500)"},{id:"task",name:"Tasks",color:"var(--warning-500)"},{id:"deadline",name:"Deadlines",color:"var(--danger-500)"},{id:"marketing",name:"Marketing",color:"var(--bs-purple)"},{id:"sales",name:"Sales",color:"var(--success-600)"},{id:"development",name:"Development",color:"var(--bs-indigo)"}];document.addEventListener("DOMContentLoaded",function(){const a=new bootstrap.Modal(document.getElementById("eventModal")),t=new bootstrap.Modal(document.getElementById("deleteModal")),e=new bootstrap.Modal(document.getElementById("categoryModal")),o=document.getElementById("eventForm"),n=document.getElementById("eventTitle"),r=document.getElementById("eventStart"),d=document.getElementById("eventEnd"),i=document.getElementById("eventAllDay"),l=document.getElementById("eventColor"),s=document.getElementById("eventDescription"),c=document.getElementById("eventLocation"),u=document.getElementById("eventCategory"),g=document.getElementById("eventId"),m=document.getElementById("deleteEventId");w(),eventData.forEach(e=>{e.extendedProps||(e.extendedProps={}),e.extendedProps.category||(e.extendedProps.category=e.category||"general")});var v=document.getElementById("calendar");const D=new FullCalendar.Calendar(v,{initialView:"dayGridMonth",themeSystem:"bootstrap",headerToolbar:{right:"today prev,next",left:"title"},footerToolbar:{left:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},buttonText:{today:"Today",month:"Month",week:"Week",day:"Day",list:"List"},dayMaxEvents:2,height:void 0,minHeight:"750px",editable:!0,droppable:!0,selectable:!0,businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"9:00",endTime:"17:00"},eventSources:[{events:eventData}],eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"},select:function(e){o.reset(),g.value="";var t=e.start,n=e.end;r.value=p(t),d.value=p(n),i.checked=e.allDay,l.value="var(--primary-500)",document.getElementById("eventModalTitle").textContent="Add New Event",document.getElementById("deleteEvent").style.display="none",a.show()},eventClick:function(e){e=e.event;console.log("Clicked event:",e),g.value=e.id,n.value=e.title,r.value=p(e.start),d.value=e.end?p(e.end):"",i.checked=e.allDay,l.value=e.backgroundColor||"var(--primary-500)",e.extendedProps?(s.value=e.extendedProps.description||"",c.value=e.extendedProps.location||"",u.value=e.extendedProps.category||"",console.log("Event category:",e.extendedProps.category)):(s.value="",c.value="",u.value=""),document.getElementById("eventModalTitle").textContent="Edit Event",document.getElementById("deleteEvent").style.display="block",a.show()},eventDrop:function(e){y("Event moved: "+e.event.title)},eventResize:function(e){y("Event duration changed: "+e.event.title)},drop:function(e){document.getElementById("removeAfterDrop").checked&&e.draggedEl.parentNode.removeChild(e.draggedEl),y("New event added via drag & drop")},eventDidMount:function(e){var t,n,a=e.event;(a.extendedProps.description||a.extendedProps.location)&&((t=document.createElement("div")).classList.add("fc-event-tooltip"),(n=document.createElement("div")).classList.add("tooltip-title"),n.textContent=a.title,t.appendChild(n),a.extendedProps.description&&((n=document.createElement("div")).classList.add("tooltip-desc"),n.textContent=a.extendedProps.description,t.appendChild(n)),a.extendedProps.location&&((n=document.createElement("div")).classList.add("tooltip-location"),n.innerHTML='<i class="fa fa-map-marker-alt me-1"></i> '+a.extendedProps.location,t.appendChild(n)),!a.allDay&&a.start&&((n=document.createElement("div")).classList.add("tooltip-time"),n.innerHTML='<i class="fa fa-clock me-1"></i> '+a.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),a.end&&(n.innerHTML+=" - "+a.end.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),t.appendChild(n)),new bootstrap.Tooltip(e.el,{title:t.outerHTML,placement:"top",trigger:"hover",html:!0,container:"body"}))}});D.render(),C();v=document.getElementById("external-events"),new FullCalendar.Draggable(v,{itemSelector:".external-event",eventData:function(e){return{title:e.innerText.trim(),backgroundColor:window.getComputedStyle(e).backgroundColor,borderColor:window.getComputedStyle(e).borderColor,description:e.dataset.description||"",location:e.dataset.location||"",category:e.dataset.category||""}}}),o.addEventListener("submit",function(e){e.preventDefault();var t,e={title:n.value,start:new Date(r.value),end:d.value?new Date(d.value):null,allDay:i.checked,backgroundColor:l.value,borderColor:l.value,extendedProps:{description:s.value,location:c.value,category:u.value||"general"}};u.value&&(t=eventCategories.find(e=>e.id===u.value))&&(e.backgroundColor=t.color,e.borderColor=t.color),console.log("Form submitted with data:",e),console.log("Event ID:",g.value),g.value?(t=D.getEventById(g.value),console.log("Existing event:",t),t?(t.remove(),e.id=g.value,D.addEvent(e),y("Event updated successfully")):(console.error("Could not find event with ID:",g.value),y("Error updating event: Event not found"))):(e.id="event-"+(new Date).getTime(),D.addEvent(e),y("Event added successfully")),a.hide(),E()}),v=document.getElementById("deleteEvent"),v&&v.addEventListener("click",function(){m.value=g.value,a.hide(),t.show()}),v=document.getElementById("confirmDelete"),v&&v.addEventListener("click",function(){var e=D.getEventById(m.value);e&&(e.remove(),y("Event deleted successfully")),t.hide()}),v=document.getElementById("manageCategoriesBtn"),v&&v.addEventListener("click",function(){b(),e.show()}),v=document.getElementById("categoryForm"),v&&v.addEventListener("submit",function(e){e.preventDefault();var e=document.getElementById("categoryName").value,t=document.getElementById("categoryColor").value,n="cat-"+(new Date).getTime();eventCategories.push({id:n,name:e,color:t}),w(),b(),y("Category added successfully"),document.getElementById("categoryName").value=""}),v=document.getElementById("toggleAllFilters"),v&&v.addEventListener("click",function(){var e=document.querySelectorAll(".category-filter");const t=Array.from(e).every(e=>e.checked);e.forEach(e=>{e.checked=!t});e=this.querySelector("i");e&&(e.className=t?"fa fa-square":"fa fa-check-square"),E(),y(t?"All categories disabled":"All categories enabled")}),v=document.querySelectorAll(".category-filter");function p(e){return e?(e=new Date(e)).getFullYear()+`-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}T${String(e.getHours()).padStart(2,"0")}:`+String(e.getMinutes()).padStart(2,"0"):""}function y(e){var t=document.getElementById("toast-container");const n=document.createElement("div");n.className="toast align-items-center show text-white bg-primary border-0",n.setAttribute("role","alert"),n.setAttribute("aria-live","assertive"),n.setAttribute("aria-atomic","true"),n.innerHTML=`
            <div class="d-flex">
                <div class="toast-body">
                    ${e}
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        `,t.appendChild(n),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>n.remove(),300)},3e3)}function w(){const n=document.getElementById("eventCategory");n.innerHTML='<option value="">Select Category</option>',eventCategories.forEach(e=>{var t=document.createElement("option");t.value=e.id,t.textContent=e.name,t.style.color=e.color,n.appendChild(t)})}function b(){const a=document.getElementById("categoryList");a.innerHTML="",eventCategories.forEach((e,t)=>{var t=t<7,n=document.createElement("li");n.className="list-group-item d-flex align-items-center justify-content-between",n.innerHTML=`
                <div class="d-flex align-items-center">
                    <span class="badge d-block rounded-circle p-1" style="background-color: ${e.color};"></span>
                    <span class="ms-2">${e.name}</span>
                </div>
                ${t?"":`<button type="button" class="btn btn-xs btn-outline-danger delete-category" data-id="${e.id}">
                        Delete
                    </button>`}
            `,a.appendChild(n)}),document.querySelectorAll(".delete-category").forEach(e=>{e.addEventListener("click",function(){var t,e,n=this.getAttribute("data-id");t=n,-1===(n=eventCategories.findIndex(e=>e.id===t))||n<7||(e=eventCategories[n].name,eventCategories.splice(n,1),w(),b(),C(),D.getEvents().forEach(e=>{e.extendedProps.category===t&&(e.setExtendedProp("category","general"),e.setProp("backgroundColor",eventCategories[0].color),e.setProp("borderColor",eventCategories[0].color))}),y(`Category "${e}" deleted`))})})}function C(){const n=document.getElementById("category-filters");n&&(n.innerHTML="",eventCategories.forEach(e=>{var t=document.createElement("div");t.className="form-check",t.innerHTML=`
                <input class="form-check-input category-filter" type="checkbox" value="${e.id}" id="filter-${e.id}">
                <label class="form-check-label d-flex align-items-center" for="filter-${e.id}">
                    <span class="badge rounded-circle p-1 me-2" style="background-color: ${e.color}; width: 0.25rem; height: 0.25rem;">&nbsp;</span>
                    ${e.name}
                </label>
            `,n.appendChild(t)}),document.querySelectorAll(".category-filter").forEach(e=>{e.addEventListener("change",E)}))}function E(){if(D){const n=[],a=(document.querySelectorAll(".category-filter:checked").forEach(e=>{n.push(e.value)}),console.log("Selected categories:",n),n.includes("general"));D.getEvents().forEach(e=>{var t=e.extendedProps&&e.extendedProps.category?e.extendedProps.category:"general";console.log(`Event: ${e.title}, Category: `+t),0===n.length||n.includes(t)||"general"===t&&a?e.setProp("display","auto"):e.setProp("display","none")}),D.updateSize()}}v&&0<v.length&&v.forEach(e=>{e.addEventListener("change",E)});v=document.getElementById("exportEvents"),v&&v.addEventListener("click",function(){var e=D.getEvents().map(e=>({id:e.id,title:e.title,start:e.start,end:e.end,allDay:e.allDay,backgroundColor:e.backgroundColor,borderColor:e.borderColor,description:e.extendedProps.description,location:e.extendedProps.location,category:e.extendedProps.category})),e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","calendar-events.json"),document.body.appendChild(t),t.click(),t.remove()}),v=document.getElementById("importEvents"),v&&v.addEventListener("change",function(e){var t,e=e.target.files[0];e&&((t=new FileReader).onload=function(e){try{var t=JSON.parse(e.target.result);D.getEvents().forEach(e=>e.remove()),t.forEach(e=>{D.addEvent({id:e.id||"imported-"+(new Date).getTime()+Math.random().toString(36).substr(2,5),title:e.title,start:new Date(e.start),end:e.end?new Date(e.end):null,allDay:e.allDay,backgroundColor:e.backgroundColor,borderColor:e.borderColor,extendedProps:{description:e.description,location:e.location,category:e.category}})}),y("Events imported successfully")}catch(e){y("Error importing events: "+e.message)}},t.readAsText(e))}),v=document.getElementById("printCalendar");v&&v.addEventListener("click",function(){window.print()})});